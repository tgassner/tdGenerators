<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Click Vitrinen Generator</title>
<!-- <script src="https://cdn.jsdelivr.net/npm/makerjs@0/target/js/browser.maker.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bezier-js@2/bezier.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/opentype.js@0/dist/opentype.js"></script> -->

<script src="lib/browser.maker.js"></script>
<script src="lib/bezier.js"></script>
<script src="lib/opentype.js"></script>
<!-- <script src="lib/gl-matrix.js"></script> -->

<script type="text/javascript">
	var makerjs = require('makerjs');
</script>
</head>
<body>
<h1 style="margin-top: 5px;margin-bottom: 2px;">Click Vitrinen Generator</h1>
<div style="margin-top: 0px;margin-bottom: 15px;">Version 0.1 &nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;07.11.2022 by Gassi</div>

<div id="logodiv" style="background: linear-gradient(to left, #ffcd00, #ffcd14 , #ffcd00);width:fit-content; right:0px;position:absolute;top:0px;padding:20px">
	<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg  xmlns:dc="http://purl.org/dc/elements/1.1/"  xmlns:cc="http://creativecommons.org/ns#"  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"  xmlns:svg="http://www.w3.org/2000/svg"  xmlns="http://www.w3.org/2000/svg"  xmlns:xlink="http://www.w3.org/1999/xlink"  id="svg8"  version="1.1"  viewBox="0 0 50.469002 15.519"  height="15.519mm"  width="50.469002mm">  <defs  id="defs2">  <rect  id="SVGID_1_"  x="22.370001"  y="29.84"  width="181.41"  height="181.41" />  <rect  id="SVGID_3_"  x="54.110001"  y="146.83"  width="120.25"  height="24.34" />  <rect  id="SVGID_5_"  x="54.110001"  y="146.83"  width="120.25"  height="24.34" />  <rect  id="SVGID_7_"  x="54.110001"  y="121.56"  width="121.28"  height="23.139999" />  <rect  id="SVGID_9_"  x="54.110001"  y="121.56"  width="121.28"  height="23.139999" />  <path  id="SVGID_11_"  d="m 168.62,135.89 c 0.54,0.29 0.91,0.55 1.1,0.79 0.2,0.24 0.3,0.6 0.3,1.07 v 0.47 c 0,1.02 -0.89,1.52 -2.67,1.52 -1.78,0 -3.38,-0.3 -4.79,-0.9 v 4.51 c 1.14,0.48 2.83,0.71 5.08,0.71 2.25,0 4,-0.45 5.24,-1.35 1.24,-0.9 1.87,-2.19 1.87,-3.87 v -1.93 c 0,-0.11 -0.03,-0.21 -0.04,-0.31 -2.3,-0.47 -4.7,-0.91 -7.21,-1.32 z m -113.87,0.43 v 7.59 h 4.7 v -6.22 h 2.33 c 1.68,0 3,-0.4 3.96,-1.21 0.65,-0.54 1.06,-1.28 1.27,-2.17 -4.34,0.59 -8.44,1.26 -12.26,2.01 M 69.41,134 v 9.91 h 10.48 v -3.92 h -5.75 v -6.56 c -1.61,0.18 -3.18,0.37 -4.73,0.57 m 76.16,9.91 h 4.45 l 0.84,-4.97 h 4.26 l 0.9,4.97 h 4.45 l -1.92,-9.92 c -1.44,-0.18 -2.9,-0.36 -4.39,-0.52 l 0.27,1.52 h -2.92 l 0.3,-1.77 c -1.34,-0.14 -2.7,-0.27 -4.07,-0.39 z m -64.2,-11.18 v 11.18 h 10.92 v -4.04 h -6.25 v -4.85 h 5.41 V 132 c -3.45,0.2 -6.81,0.44 -10.08,0.73 m 52.82,11.18 h 10.48 v -3.92 h -5.75 v -7.84 c -1.56,-0.1 -3.13,-0.19 -4.73,-0.27 z m -35.91,-12.23 0.64,1.5 -4.6,10.73 h 5.07 l 2.11,-5.88 1.99,5.88 h 5.07 l -4.63,-10.73 0.73,-1.71 c -2.15,0.05 -4.28,0.13 -6.38,0.21 m 20.44,7.16 c 0,1.66 0.58,2.94 1.73,3.86 1.15,0.91 2.84,1.37 5.05,1.37 2.21,0 4.14,-0.43 5.75,-1.31 v -10.42 h -4.54 v 7.28 c -0.33,0.17 -0.8,0.25 -1.42,0.25 -0.61,0 -1.07,-0.13 -1.38,-0.39 -0.31,-0.26 -0.47,-0.64 -0.47,-1.13 v -6.87 c -1.56,-0.04 -3.14,-0.06 -4.73,-0.08 v 7.44 z m -8.04,-7.45 v 12.52 h 4.73 v -12.53 c -0.47,0 -0.93,-0.01 -1.4,-0.01 -1.12,0 -2.22,0.01 -3.33,0.02" />  <rect  id="SVGID_17_"  x="170.49001"  y="118.36"  width="16.209999"  height="9.5900002" />  <clipPath  id="SVGID_2_">    <use  height="100%"  width="100%"  y="0"  x="0"  xlink:href="#SVGID_1_"  style="overflow:visible"  id="use19" />    </clipPath>  </defs>  <metadata  id="metadata5">  <rdf:RDF>  <cc:Work  rdf:about="">  <dc:format>image/svg+xml</dc:format>  <dc:type  rdf:resource="http://purl.org/dc/dcmitype/StillImage" />  <dc:title></dc:title>  </cc:Work>  </rdf:RDF>  </metadata>  <g  transform="translate(0,-281.481)"  id="layer1">  <g  id="g358">  <g  style="fill:#fff9d1"  id="g40"  clip-path="url(#SVGID_2_)"  class="st1"  transform="matrix(0.26458333,0,0,0.26458333,2.7061703,251.01424)">    <g  id="g38">     <defs  id="defs23" />      <clipPath  id="SVGID_4_">      <use  id="use25"  style="overflow:visible"  xlink:href="#SVGID_3_"  x="0"  y="0"  width="100%"  height="100%" />      </clipPath>      <g  id="g36"  clip-path="url(#SVGID_4_)"  class="st2">      <defs  id="defs29" />       <clipPath  id="SVGID_6_">       <use  id="use31"  style="overflow:visible"  xlink:href="#SVGID_5_"  x="0"  y="0"  width="100%"  height="100%" />       </clipPath>       <path  id="path34"  clip-path="url(#SVGID_6_)"  d="m 163.69,151.53 c -0.88,0 -1.9,0.25 -3.08,0.74 v -0.68 h -1.79 v 14.98 h 1.87 v -12.61 c 0.96,-0.46 1.86,-0.68 2.68,-0.68 1.3,0 1.95,0.64 1.95,1.92 v 11.37 h 1.87 V 155.2 c 0,-0.44 -0.04,-0.79 -0.13,-1.05 0.95,-0.58 1.9,-0.87 2.84,-0.87 1.28,0 1.92,0.64 1.92,1.92 v 11.37 h 1.9 V 155 c 0,-1.11 -0.32,-1.96 -0.95,-2.57 -0.63,-0.61 -1.55,-0.91 -2.74,-0.91 -1.19,0 -2.4,0.36 -3.61,1.08 -0.63,-0.71 -1.54,-1.07 -2.73,-1.07 m -8.56,0.1 c -0.18,0.05 -0.31,0.09 -0.41,0.12 -0.1,0.03 -0.24,0.09 -0.42,0.2 -0.18,0.11 -0.3,0.17 -0.34,0.2 -0.04,0.03 -0.18,0.12 -0.4,0.28 -0.22,0.16 -0.36,0.25 -0.41,0.29 v -1.13 h -1.79 v 14.98 h 1.87 V 154.5 c 0.53,-0.37 0.87,-0.61 1.03,-0.71 0.51,-0.33 1.08,-0.5 1.71,-0.5 h 0.9 v -1.79 h -0.66 c -0.46,0 -0.82,0.05 -1.08,0.13 m -15.66,11.11 c 0,1.25 0.35,2.24 1.05,2.97 0.7,0.74 1.77,1.11 3.21,1.11 1.44,0 2.51,-0.37 3.21,-1.11 0.7,-0.74 1.05,-1.73 1.05,-2.97 v -7.35 c 0,-1.25 -0.35,-2.24 -1.05,-2.97 -0.7,-0.74 -1.77,-1.11 -3.21,-1.11 -1.44,0 -2.51,0.37 -3.21,1.11 -0.7,0.74 -1.05,1.73 -1.05,2.97 z m 6.68,-0.02 c 0,1.65 -0.81,2.47 -2.42,2.47 -1.62,0 -2.42,-0.82 -2.42,-2.47 v -7.29 c 0,-1.63 0.81,-2.45 2.42,-2.45 1.61,0 2.42,0.82 2.42,2.45 z m -16.19,3.84 h 1.87 v -7.71 h 5.29 v -1.69 h -5.29 v -6.63 h 5.58 v -1.66 h -7.45 z m -8.66,-14.93 c -0.18,0.05 -0.31,0.09 -0.41,0.12 -0.1,0.03 -0.24,0.09 -0.42,0.2 -0.18,0.11 -0.3,0.17 -0.34,0.2 -0.04,0.03 -0.18,0.12 -0.4,0.28 -0.22,0.16 -0.36,0.25 -0.41,0.29 v -1.13 h -1.79 v 14.98 h 1.87 V 154.5 c 0.53,-0.37 0.87,-0.61 1.03,-0.71 0.51,-0.33 1.08,-0.5 1.71,-0.5 h 0.9 v -1.79 h -0.66 c -0.45,0 -0.81,0.05 -1.08,0.13 m -13.66,3.79 c 0,-1.65 0.82,-2.47 2.45,-2.47 1.63,0 2.45,0.83 2.45,2.47 v 3.03 h -4.9 z m 3.11,11.27 c 1.21,0 2.25,-0.14 3.13,-0.42 v -1.74 c -1.11,0.32 -2.18,0.47 -3.21,0.47 -1.04,0 -1.8,-0.19 -2.29,-0.58 -0.49,-0.39 -0.74,-0.97 -0.74,-1.76 V 160 h 6.69 v -4.58 c 0,-1.25 -0.35,-2.24 -1.04,-2.99 -0.69,-0.75 -1.76,-1.12 -3.2,-1.12 -1.44,0 -2.51,0.37 -3.22,1.12 -0.71,0.75 -1.07,1.74 -1.07,2.99 v 7.32 c 0,2.64 1.65,3.95 4.95,3.95 m -10.19,-15.11 h -2.47 c -1.23,0 -2.21,0.35 -2.95,1.04 -0.74,0.69 -1.11,1.66 -1.11,2.91 v 7.34 c 0,1.21 0.31,2.14 0.94,2.79 0.62,0.65 1.52,0.97 2.7,0.97 1.18,0 2.16,-0.32 2.95,-0.95 v 0.87 h 1.82 l 0.44,-18.95 H 101 Z m 0,12.48 c -0.63,0.6 -1.47,0.9 -2.53,0.9 -1.42,0 -2.13,-0.74 -2.13,-2.21 v -7.19 c 0,-1.51 0.83,-2.26 2.5,-2.26 h 2.16 z m -16.17,-8.64 c 0,-1.65 0.82,-2.47 2.45,-2.47 1.63,0 2.45,0.83 2.45,2.47 v 3.03 h -4.9 z m 3.11,11.27 c 1.21,0 2.25,-0.14 3.13,-0.42 v -1.74 c -1.11,0.32 -2.18,0.47 -3.21,0.47 -1.04,0 -1.8,-0.19 -2.29,-0.58 -0.49,-0.39 -0.74,-0.97 -0.74,-1.76 V 160 h 6.69 v -4.58 c 0,-1.25 -0.35,-2.24 -1.04,-2.99 -0.69,-0.75 -1.76,-1.12 -3.2,-1.12 -1.44,0 -2.51,0.37 -3.22,1.12 -0.71,0.75 -1.07,1.74 -1.07,2.99 v 7.32 c 0,2.64 1.65,3.95 4.95,3.95 m -10.19,0.11 c 0,0.72 -0.14,1.24 -0.42,1.55 -0.28,0.32 -0.73,0.47 -1.34,0.47 -0.19,0 -0.43,-0.02 -0.71,-0.05 v 1.68 c 0.26,0.05 0.52,0.08 0.76,0.08 1.18,0 2.07,-0.33 2.67,-0.99 0.61,-0.66 0.91,-1.58 0.91,-2.75 v -15.11 h -1.87 z m 2.08,-18.12 c 0,-0.81 -0.38,-1.21 -1.14,-1.21 -0.76,0 -1.15,0.4 -1.15,1.21 0,0.81 0.38,1.21 1.15,1.21 0.77,0 1.14,-0.4 1.14,-1.21 m -17.14,2.9 h -1.79 v 14.98 h 1.87 v -12.61 c 0.97,-0.46 1.86,-0.68 2.69,-0.68 1.3,0 1.95,0.64 1.95,1.92 v 11.37 h 1.87 V 155 c 0,-1.11 -0.32,-1.96 -0.95,-2.57 -0.63,-0.61 -1.43,-0.91 -2.41,-0.91 -0.98,0 -2.05,0.25 -3.22,0.74 v -0.68 z m -7.29,14.98 h 1.87 v -14.87 h -1.87 z m 2.08,-17.88 c 0,-0.81 -0.38,-1.21 -1.14,-1.21 -0.76,0 -1.15,0.4 -1.15,1.21 0,0.81 0.38,1.21 1.15,1.21 0.76,0.01 1.14,-0.4 1.14,-1.21"  class="st3"  style="fill:#647a84" />      </g>     </g>    </g>  <g  style="fill:#fff9d1"  id="g77"  clip-path="url(#SVGID_2_)"  class="st1"  transform="matrix(0.26458333,0,0,0.26458333,2.7061703,251.01424)">    <g  id="g75">     <defs  id="defs43" />      <clipPath  id="SVGID_8_">      <use  id="use45"  style="overflow:visible"  xlink:href="#SVGID_7_"  x="0"  y="0"  width="100%"  height="100%" />      </clipPath>      <g  id="g56"  clip-path="url(#SVGID_8_)"  class="st4">      <defs  id="defs49" />       <clipPath  id="SVGID_10_">       <use  id="use51"  style="overflow:visible"  xlink:href="#SVGID_9_"  x="0"  y="0"  width="100%"  height="100%" />       </clipPath>       <path  id="path54"  clip-path="url(#SVGID_10_)"  d="m 162.28,129.36 c 0,2.03 1.01,3.61 3.02,4.73 l 3.33,1.8 c 0.54,0.29 0.91,0.56 1.1,0.79 0.2,0.24 0.3,0.6 0.3,1.07 v 0.47 c 0,1.02 -0.89,1.52 -2.67,1.52 -1.78,0 -3.38,-0.3 -4.79,-0.9 v 4.51 c 1.14,0.48 2.83,0.72 5.08,0.72 2.25,0 4,-0.45 5.24,-1.35 1.24,-0.9 1.87,-2.19 1.87,-3.87 v -1.93 c 0,-1.87 -0.85,-3.26 -2.55,-4.2 l -3.55,-1.99 c -0.66,-0.35 -1.09,-0.67 -1.29,-0.95 -0.2,-0.28 -0.3,-0.71 -0.3,-1.29 v -0.47 c 0,-0.48 0.14,-0.85 0.44,-1.1 0.29,-0.26 0.85,-0.39 1.68,-0.39 1.62,0 3.06,0.27 4.32,0.81 v -4.48 c -1.04,-0.44 -2.61,-0.65 -4.71,-0.65 -2.1,0 -3.72,0.45 -4.84,1.35 -1.12,0.9 -1.68,2.18 -1.68,3.84 z m -9.34,-2.71 1.49,8.33 h -2.92 z m 7.52,17.26 -4.17,-21.55 h -6.5 l -4.23,21.55 h 4.45 l 0.84,-4.98 h 4.26 l 0.9,4.98 z m -26.27,0 h 10.48 v -3.92 h -5.75 v -17.63 h -4.73 z m -15.47,-5.07 c 0,1.66 0.58,2.94 1.73,3.86 1.15,0.91 2.84,1.37 5.05,1.37 2.22,0 4.14,-0.44 5.75,-1.31 v -10.42 h -4.54 v 7.28 c -0.33,0.17 -0.8,0.25 -1.41,0.25 -0.61,0 -1.07,-0.13 -1.38,-0.39 -0.31,-0.26 -0.47,-0.64 -0.47,-1.14 v -10.23 c 0,-0.5 0.22,-0.89 0.65,-1.18 0.43,-0.29 1.28,-0.43 2.52,-0.43 1.24,0 2.49,0.24 3.73,0.72 v -4.42 c -1.18,-0.39 -2.64,-0.59 -4.39,-0.59 -2.32,0 -4.11,0.48 -5.36,1.45 -1.25,0.96 -1.88,2.26 -1.88,3.9 z m -8.04,5.07 h 4.73 v -21.55 h -4.73 z m -9.18,-15.61 -2.15,-5.94 h -5.04 l 4.6,10.82 -4.6,10.73 h 5.07 l 2.11,-5.88 1.99,5.88 h 5.07 l -4.63,-10.73 4.63,-10.82 h -5.04 z m -20.13,15.61 h 10.92 v -4.04 h -6.25 v -4.85 h 5.41 v -4.04 h -5.41 v -4.57 h 6.25 v -4.04 H 81.37 Z m -11.96,0 h 10.48 v -3.92 h -5.75 v -17.63 h -4.73 z m -14.66,0 h 4.7 v -6.22 h 2.33 c 1.68,0 3,-0.4 3.96,-1.21 0.96,-0.81 1.45,-2 1.45,-3.58 v -5.75 c 0,-1.57 -0.48,-2.77 -1.45,-3.58 -0.96,-0.81 -2.29,-1.21 -3.96,-1.21 h -7.03 z m 7.78,-11.57 c 0,0.87 -0.45,1.31 -1.34,1.31 h -1.74 v -7.25 h 1.74 c 0.89,0 1.34,0.43 1.34,1.31 z"  class="st5"  style="fill:#afca0b" />      </g>      <g  id="g73"  clip-path="url(#SVGID_8_)"  class="st4">      <defs  id="defs59" />       <clipPath  id="SVGID_12_">       <use  id="use61"  style="overflow:visible"  xlink:href="#SVGID_11_"  x="0"  y="0"  width="100%"  height="100%" />       </clipPath>              <radialGradient  gradientUnits="userSpaceOnUse"  gradientTransform="matrix(32.166,0,0,-32.166,1223.5194,8516.6758)"  r="0.68699998"  cy="260.28519"  cx="-34.4804"  id="SVGID_13_">       <stop  id="stop64"  style="stop-color:#AFCA0B"  offset="0" />        <stop  id="stop66"  style="stop-color:#AFCA0B"  offset="9.340660e-04" />        <stop  id="stop68"  style="stop-color:#95C11F"  offset="1" />       </radialGradient>       <rect  id="rect71"  clip-path="url(#SVGID_12_)"  height="12.7"  width="120"  class="st6"  y="131.37"  x="54.75"  style="fill:url(#SVGID_13_)" />      </g>     </g>    </g>  <g  id="g112"  transform="matrix(0.26458333,0,0,0.26458333,2.7061703,251.01424)">   <g  id="g110">    <g  id="g108">     <defs  id="defs101" />      <clipPath  id="SVGID_18_">      <use  height="100%"  width="100%"  y="0"  x="0"  xlink:href="#SVGID_17_"  style="overflow:visible"  id="use103" />      </clipPath>      <path  style="fill:#afca11"  class="st9"  d="m 178.26,124.27 h 0.33 c 0.18,0 0.3,0.03 0.37,0.08 0.07,0.05 0.11,0.17 0.11,0.36 0,0.19 -0.04,0.32 -0.13,0.39 -0.08,0.07 -0.23,0.1 -0.43,0.1 h -0.26 v -0.93 z m -0.38,2.21 h 0.38 v -0.96 h 0.29 c 0.07,0 0.13,0 0.16,-0.01 l 0.39,0.97 h 0.42 l -0.47,-1.05 c 0.24,-0.12 0.35,-0.36 0.35,-0.73 0,-0.51 -0.29,-0.77 -0.86,-0.77 h -0.69 v 2.55 z m -0.51,-2.61 c 0.19,-0.24 0.6,-0.36 1.22,-0.36 0.62,0 1.03,0.12 1.23,0.36 0.2,0.24 0.3,0.69 0.3,1.35 0,0.66 -0.1,1.1 -0.29,1.34 -0.2,0.24 -0.61,0.35 -1.23,0.35 -0.63,0 -1.03,-0.12 -1.22,-0.35 -0.19,-0.24 -0.28,-0.68 -0.28,-1.34 -0.02,-0.66 0.07,-1.11 0.27,-1.35 m -0.28,2.91 c 0.28,0.32 0.78,0.47 1.51,0.47 0.73,0 1.23,-0.16 1.51,-0.48 0.28,-0.32 0.41,-0.84 0.41,-1.56 0,-0.72 -0.14,-1.24 -0.42,-1.57 -0.28,-0.32 -0.78,-0.49 -1.5,-0.49 -0.72,0 -1.22,0.16 -1.5,0.49 -0.28,0.33 -0.42,0.85 -0.42,1.57 0,0.72 0.13,1.26 0.41,1.57"  clip-path="url(#SVGID_18_)"  id="path106" />     </g>    </g>   </g>  <g  id="g306"  transform="matrix(0.20975229,0,0,0.20975229,-0.91464975,280.66829)">  <path  id="path302"  d="M 75.97,50.42 C 73.55,43.59 66.92,32.31 58.25,23.24 49.53,14.05 36.85,3.55 28,3.88 21.38,4.14 17.63,8.63 14.27,15.22 c -0.31,0.84 0.08,1.56 1.43,1.56 h 22.08 c 0,0 1.64,-0.03 2.52,0.83 3.21,3.17 5.31,6.22 6.91,9.82 0.71,1.58 -0.09,2.72 -2.26,2.72 -3.99,0 -7.88,0.01 -9.62,0 -1.07,0 -1.86,0.94 -1.86,1.99 0,0.01 0,0.01 0,0.02 l -0.03,26.78 c 0,0 0.04,1.21 -1.49,1.94 -3.01,1.44 -7.64,2.75 -11.97,3.21 0,0 -1.34,0.26 -1.34,-1.42 V 32.11 c 0,0 0,0 0,0 0,-1.08 -0.84,-1.96 -1.91,-1.96 H 9.7 c 0,0 0,0 0,0 -0.96,0 -1.49,0.52 -1.79,1.29 -2.42,8.8 -3.67,18.31 -3.54,24.21 0.19,8.06 1.14,13.52 4.77,18.08 3.44,4.31 14.16,4.85 24.53,3.43 C 50.33,74.96 59.35,71.1 67.58,67 79.29,61.34 78.39,57.25 75.97,50.42"  class="st0"  style="fill:#ffffff" />   <path  id="path304"  d="m 67.57,66.99 c 2.47,-1.19 4.35,-2.31 5.8,-3.4 C 65.82,48.49 51.13,37.35 33.48,34.27 l -0.03,24.66 c 0,0 0.04,1.21 -1.49,1.94 -3.01,1.44 -7.64,2.75 -11.97,3.21 0,0 -1.34,0.26 -1.34,-1.42 V 33.62 c -4.09,0.35 -8.05,1.11 -11.84,2.27 -1.69,7.43 -2.55,14.85 -2.44,19.76 0.19,8.06 1.14,13.52 4.77,18.08 3.44,4.31 14.16,4.85 24.53,3.43 16.64,-2.21 25.66,-6.06 33.9,-10.17"  class="st1"  style="fill:#fff9d1" />  </g>  </g>  </g>  <style  type="text/css"  id="style10">  .st0{fill:#FFFFFF;}  .st1{clip-path:url(#SVGID_2_);}  .st2{clip-path:url(#SVGID_4_);}  .st3{clip-path:url(#SVGID_6_);fill:#647A84;}  .st4{clip-path:url(#SVGID_8_);}  .st5{clip-path:url(#SVGID_10_);fill:#AFCA0B;}  .st6{clip-path:url(#SVGID_12_);fill:url(#SVGID_13_);}  .st7{clip-path:url(#SVGID_2_);fill:#FFDE14;}  .st8{clip-path:url(#SVGID_15_);fill:url(#SVGID_16_);}  .st9{clip-path:url(#SVGID_18_);fill:#AFCA11;} </style>  <style  type="text/css"  id="style300">  .st0{fill:#FFFFFF;}  .st1{fill:#FFF9D1;} </style> </svg> 
</div>

<div id="clickCabinetPreviewDiv" name="inleyPreviewDiv"></div>

<br><br>

<div style="width: 600px">
	<div id="guiElements" style="display: flex; flex-flow: column; ">
		<div style="background-color: aliceblue;height: fit-content;clear: both; width: 100%;display: table;">
			<div style='font-weight: bold; margin-left: 15px; margin-bottom: 8px;'>Vitrine LxBxH Außenmaße</div>

			<div style="display: flex; flex-flow: column">
				<div style="display: flex; flex-flow: row;">
					<div style="flex-basis: 100px; justify-content: right; display: flex; margin-right: 8px">L: </div>
					<input type="number" min="50" max="1000" id="cabinetLength" name="cabinetLength" onchange="cabinetLengthChanged()" style="width: 60px">
					<span style="margin-left: 8px">mm</span>
					<div id="cabinetLengthErrorMsg" style="margin-left: 10px; color: #ff0000"></div>
				</div>
				<div style="display: flex; flex-flow: row;">
					<div style="flex-basis: 100px; justify-content: right; display: flex; margin-right: 8px">B: </div>
					<input type="number" min="50" max="1000" id="cabinetWidth"  name="cabinetWidth"  onchange="cabinetWidthChanged()"  style="width: 60px">
					<span style="margin-left: 8px">mm</span>
					<div id="cabinetWidthErrorMsg" style="margin-left: 10px; color: #ff0000"></div>
				</div>
				<div style="display: flex; flex-flow: row;">
					<div style="flex-basis: 100px; justify-content: right; display: flex; margin-right: 8px">H: </div>
					<input type="number" min="50" max="1000" id="cabinetHeight" name="cabinetHeight" onchange="cabinetHeightChanged()" style="width: 60px">
					<span style="margin-left: 8px">mm</span>
					<div id="cabinetHeightErrorMsg" style="margin-left: 10px; color: #ff0000"></div>
				</div>
				<div style="display: flex; flex-flow: row;">
					<div style="flex-basis: 100px; justify-content: right; display: flex; margin-right: 8px">Mit Boden: </div>
					<input type="checkbox" id="processAlsoFloor" name="processAlsoFloor" onchange="processAlsoFloorChanged()" style="display: flex; justify-content: left; margin-left: 0px">
				</div>
				<div style="display: flex; flex-flow: row;">
					<div style="flex-basis: 100px; justify-content: right; display: flex; margin-right: 8px ">Materialdicke: </div>
					<div style="display: flex; justify-content: left; margin-left: 0px; flex-flow: column">
						<div style="display: flex; justify-content: left; margin-left: 0px">
							<input type="radio" id="ratio1dot5mm" name="materialThicknessRadio" value="1.5" checked onchange="materialThicknessChanged()" style="margin-left: 0px; display: flex">
							<span style="margin-left: 8px">1.5 mm</span>
						</div>
						<div style="display: flex; justify-content: left; margin-left: 0px">
							<input type="radio" id="ratio2mm" name="materialThicknessRadio" value="2" onchange="materialThicknessChanged()" style="margin-left: 0px; display: flex">
							<span style="margin-left: 8px">2 mm</span>
						</div>
					</div>
				</div>
			</div>
			<div style="width:45%;float: left;display:table-cell">
				<div id="infoMessage" style="padding:10px;"></div>
			</div>
		</div>

		<div id="exportButtons" style="background-color: cornsilk; display:flex; padding-top:10px; padding-bottom:10px; justify-content : space-around">
			<button id="downloadDXF" onclick="downloadDXF()" style="display: flex; flex-grow: 1; margin-left: 5px; margin-right: 5px" title="Generiere und download eine DXF Datei"> DXF Download</button>
			<button id="downloadSVG" onclick="downloadSVG()" style="display: flex; flex-grow: 1; margin-left: 5px; margin-right: 5px" title="Generiere und download eine SVG Datei"> SVG Download</button>
			<button onclick="determinenoOfElementsIncludingTheHalf()"> muhaha </button>
		</div>

		<div id="debugInfosOuter" style="background-color: cadetblue; display: flex">
			<div style="padding: 15px;" id="debugInfosInner">
		</div>
	</div>
</div>
<script type="text/javascript">
var makerjs = require('makerjs');
var font;
var model;

var canvas;
var gl;
var yAngle, xAngle, zAngle;
const speed = 0.1;

var poslogImportant = {
	x : 0,
	y : 0,
	history : [],
}

var posLog = {
	x : 0,
	y : 0,
	history : [],
}

var metadata = {
	log : false,

	//cabinetLength : 350,
	//cabinetWidth : 170,
	//cabinetHeight : 140,
	cabinetLength : 350,
	cabinetWidth : 140,
	cabinetHeight : 110,

	minSideLength : 50,
	maxSideLength : 1000,

	radius1 : 0.2,
	radius2 : 0.2,
	radius3 : 0.2,
	radius4 : 1,

	length1 : 0.9,
	length2 : 0.1,
	length3 : 0,

	cornerRadius : 1,

	clickElementLength : 30,
	borderElementLength : 10,

	laserLoss : 0.2,

	processAlsoFloor : false,
	materialThickness : 1.5,
};

var calcData = {
	cabinetHeightNoOfElements : 0,
	cabinetHeightlengthElement : 0,

	cabinetWidthNoOfElements : 0,
	cabinetWidthlengthElement : 0,

	cabinetLengthNoOfElements : 0,
	cabinetLengthlengthElement : 0,
}

document.addEventListener("DOMContentLoaded", function(event) { 
	let thisYear = new Date();
	//opentype.load("https://fonts.cdnfonts.com/s/18519/Lovelo-Black.woff", function(err, fontParam) {
	opentype.load("fonts/Lovelo-Black.woff", function(err, fontParam) {
		if (err) {
			alert("Error: " + err);
		} else {
			font = fontParam;
			model = createModel();
			drawPreview();
			document.getElementById('cabinetLength').focus();
		}
	});
});

function createModel() {
	var modelLocal = {
	  paths: {

		//metadata
		// Main Border
		//front1_1: new makerjs.paths.Line([0, 0], [metadata.cabinetLength, 0]),
		
	  },
	  models: {
		//aaa : new makerjs.models.Rectangle(80, 40),
	  }
	};

	
	modelLocal.units = makerjs.unitType.Millimeter;

	createSurfaceArea(modelLocal, "front", metadata.cabinetHeight, metadata.cabinetWidth, metadata.cabinetHeight + 10 + metadata.cabinetLength + 10, metadata.cabinetHeight + 10);
	createSurfaceArea(modelLocal, "back", metadata.cabinetHeight, metadata.cabinetWidth, 0, metadata.cabinetHeight + 10);

	createSurfaceArea(modelLocal, "left", metadata.cabinetLength, metadata.cabinetHeight, metadata.cabinetHeight + 10, metadata.cabinetHeight + 10 + metadata.cabinetWidth + 10);
	createSurfaceArea(modelLocal, "right", metadata.cabinetLength, metadata.cabinetHeight, metadata.cabinetHeight + 10, 0);

	createSurfaceArea(modelLocal, "top", metadata.cabinetLength, metadata.cabinetWidth, metadata.cabinetHeight + 10, metadata.cabinetHeight + 10);


	calcData.cabinetHeightNoOfElements = Math.trunc((metadata.cabinetHeight - (2 * metadata.borderElementLength)) / metadata.clickElementLength);
	calcData.cabinetHeightlengthElement = (metadata.cabinetHeight - (2 * metadata.borderElementLength)) / calcData.cabinetHeightNoOfElements;

	calcData.cabinetWidthNoOfElements = Math.trunc((metadata.cabinetWidth - (2 * metadata.borderElementLength)) / metadata.clickElementLength);
	calcData.cabinetWidthlengthElement = (metadata.cabinetWidth - (2 * metadata.borderElementLength)) / calcData.cabinetWidthNoOfElements;

	calcData.cabinetLengthNoOfElements = Math.trunc((metadata.cabinetLength - (2 * metadata.borderElementLength)) / metadata.clickElementLength);
	calcData.cabinetLengthlengthElement = (metadata.cabinetLength - (2 * metadata.borderElementLength)) / calcData.cabinetLengthNoOfElements;


	document.getElementById('debugInfosInner').innerHTML = 
		"Debug Infos:<br><pre>" + "calcData: \n" +  JSON.stringify(calcData, null, 2) + "\n\n\n" +
		"metaData: \n" +  JSON.stringify(metadata, null, 2) + "\n\n" + 
		"calcEckAussenFix()= " + calcEckAussenFix() + "\n" + 
		"calcEckInnenFix()= " + calcEckInnenFix() + "\n" +
		"calcDiffInnenAussen()= " + calcDiffInnenAussen() + "\n" + 
		"</pre>";

	modelLocal.models["leftSurfaceMitHakerl"] = makerjs.importer.fromSVGPathData(createLeftSurface());
	//modelLocal.models["upperSurfaceMitHakerl"] = makerjs.importer.fromSVGPathData(createUpperSurface());

/*
modelLocal.models["aaa"] = makerjs.importer.fromSVGPathData("M 0 -320 v 300");
modelLocal.models["bbb"] = makerjs.importer.fromSVGPathData("M 10.1 -320 v 300");
modelLocal.models["ccc"] = makerjs.importer.fromSVGPathData("M 39.7 -320 v 300");
modelLocal.models["ddd"] = makerjs.importer.fromSVGPathData("M 70.1 -320 v 300");
modelLocal.models["eee"] = makerjs.importer.fromSVGPathData("M 99.7 -320 v 300");
modelLocal.models["fff"] = makerjs.importer.fromSVGPathData("M 130.1 -320 v 300");
modelLocal.models["ggg"] = makerjs.importer.fromSVGPathData("M 137.5 -320 v 300");
*/
	return modelLocal;
}

function createUpperSurface() {
	let sideUpper = createUpperSurfaceOben();
	let sideRight = createUpperSurfaceRechts();
	let sideLower = createUpperSurfaceUnten();
	let sideLeft = createUpperSurfaceLinks();

	logHistoryLog();
	return sideUpper + sideRight + sideLower + sideLeft;
}

function createUpperSurfaceLinks() {
	let sideLeft = "";


	if (hasHeightGeradeAnzahlAnElementen()) {
		sideLeft += createVerticalSvgPath(-(metadata.borderElementLength - metadata.laserLoss - calcEckInnenFix() - metadata.cornerRadius - calcDiffInnenAussen()));
	} else { // ungerade
		sideLeft += createVerticalSvgPath(-(metadata.borderElementLength - (metadata.laserLoss /2)- calcEckInnenFix() - metadata.cornerRadius - calcDiffInnenAussen()));
	}


	// main loop
	for (let i = 0; i < calcData.cabinetHeightNoOfElements; i++) {
		if (((i+1) % 2) == 0) {
			sideLeft += createLeftLeftSvgPath();
			let sum = calcData.cabinetHeightlengthElement - metadata.laserLoss - metadata.laserLoss - (2 * calcEckInnenFix());
			sideLeft += createVerticalSvgPath(-sum);
		} else {
			sideLeft += createLeftRightSvgPath();
			let sum = calcData.cabinetHeightlengthElement + metadata.laserLoss + metadata.laserLoss - (2 * calcEckAussenFix());
			sideLeft += createVerticalSvgPath(-sum);
		}
	}

	if (hasLengthGeradeAnzahlAnElementen()) {
		sideLeft += createLeftRightSvgPath();
		let sum = -(metadata.borderElementLength + (metadata.laserLoss / 2) - calcEckAussenFix() - metadata.cornerRadius)
		sideLeft += createVerticalSvgPath();
		sideLeft += createUpperLeftCorner();
	} else { // ungerade
		sideLeft += createLeftLeftSvgPath();
		let sum = -(metadata.borderElementLength - calcEckInnenFix() - metadata.cornerRadius);
		sideLeft += createVerticalSvgPath(sum);
		sideLeft += createUpperLeftCorner();
	}


	return sideLeft;
}

function createUpperSurfaceUnten() {
	let sideLower = "";
	if (hasHeightGeradeAnzahlAnElementen()) {
		sideLower += createHorizontalSvgPath(-(metadata.borderElementLength - (metadata.laserLoss /2) - calcEckInnenFix() - metadata.cornerRadius - calcDiffInnenAussen()));
	} else { // ungerade
		sideLower += createHorizontalSvgPath(-(metadata.borderElementLength - metadata.laserLoss - calcEckInnenFix() - metadata.cornerRadius - calcDiffInnenAussen()));
	}

	// main loop
	let changer = hasHeightGeradeAnzahlAnElementen() ? 0 : 1;
	for (let i = 0; i < calcData.cabinetLengthNoOfElements; i++) {
		if ((changer % 2) == 0) {
			sideLower += createLowerDownSvgPath();
			sideLower += createHorizontalSvgPath(-(calcData.cabinetLengthlengthElement + metadata.laserLoss + metadata.laserLoss - (2 * calcEckAussenFix())));
		} else {
			sideLower += createLowerUpSvgPath();
			sideLower += createHorizontalSvgPath(-(calcData.cabinetLengthlengthElement - metadata.laserLoss - metadata.laserLoss - (2 * calcEckInnenFix())));
		}
		changer++;
	}
	
	if (hasLengthGeradeAnzahlAnElementen()) {
		sideLower += createLowerUpSvgPath();
		sideLower += createHorizontalSvgPath(-(metadata.borderElementLength + (metadata.laserLoss / 2) - calcEckAussenFix() - metadata.cornerRadius));
		sideLower += createLowerLeftCorner();
	} else { // ungerade
		sideLower += createLowerDownSvgPath();
		let sum = -(metadata.borderElementLength - calcEckInnenFix() - metadata.cornerRadius);
		sideLower += createHorizontalSvgPath(sum);
		sideLower += createLowerLeftCorner();
		sideLower += createVerticalSvgPath(-calcDiffInnenAussen());
	}
	return sideLower;
}

function createUpperSurfaceOben() {
	let sideUpper = createStartPos(metadata.cabinetHeight + 10 + metadata.cornerRadius, -calculateTotalHeight() + 2);
	sideUpper += createHorizontalSvgPath(metadata.cabinetLength - (2 * metadata.cornerRadius) - calcDiffInnenAussen());
	sideUpper += createUpperRightCorner();
	return sideUpper;
}

function createUpperSurfaceRechts() {
	let sideRight = "";
	sideRight += createVerticalSvgPath(metadata.borderElementLength - metadata.cornerRadius - calcEckInnenFix() - metadata.laserLoss);

	// main loop
	for (let i = 0; i < calcData.cabinetHeightNoOfElements; i++) {
		if (((i+1) % 2) == 0) {
			sideRight += createRightLeftSvgPath();
			let sum = calcData.cabinetHeightlengthElement - metadata.laserLoss - metadata.laserLoss - (2 * calcEckInnenFix());
			sideRight += createVerticalSvgPath(sum);
		} else {
			sideRight += createRightRightSvgPath();
			let sum = calcData.cabinetHeightlengthElement + metadata.laserLoss + metadata.laserLoss - (2 * calcEckAussenFix());
			sideRight += createVerticalSvgPath(sum);
		}
	}

	if (hasHeightGeradeAnzahlAnElementen()) {
		sideRight += createRightRightSvgPath();
		sideRight += createVerticalSvgPath(metadata.borderElementLength - calcEckAussenFix() - metadata.cornerRadius + metadata.laserLoss - calcDiffInnenAussen());
		sideRight += createLowerRightCorner();
		sideRight += createHorizontalSvgPath(-calcDiffInnenAussen());
		console.log("DönerDönerDöner");
	} else { // ungerade
		sideRight += createRightLeftSvgPath();
		sideRight += createVerticalSvgPath(metadata.borderElementLength - metadata.laserLoss - calcEckInnenFix() - metadata.cornerRadius);
		sideRight += createLowerRightCorner();
	}
	return sideRight;
}

function createLeftSurface() {
	let sideUpper = createLeftSurfaceOben();
	let sideRight = createLeftSurfaceRechts();
	let sideLower = createLeftSurfaceUnten();
	let sideLeft = createLeftSurfaceLinks();

	return sideUpper + sideRight + sideLower + sideLeft;
}

function hasHeightGeradeAnzahlAnElementen() {
	return ((calcData.cabinetHeightNoOfElements % 2) == 0);
}

function hasWidthGeradeAnzahlAnElementen() {
	return ((calcData.cabinetWidthNoOfElements % 2) == 0);
}

function hasLengthGeradeAnzahlAnElementen() {
	return ((calcData.cabinetLengthNoOfElements % 2) == 0);
}

function createLeftSurfaceOben() {
	let sideUpper = createStartPos(metadata.cornerRadius, metadata.cabinetHeight + 10 - calculateTotalHeight() + 2);
	sideUpper += createHorizontalSvgPath(metadata.borderElementLength + (metadata.laserLoss / 2) - calcEckAussenFix() - metadata.cornerRadius);

	// main loop
	for (let i = 0; i < calcData.cabinetHeightNoOfElements; i++) {
		if (((i+1) % 2) == 0) {
			sideUpper += createUpperUpSvgPath();
			let sum = calcData.cabinetHeightlengthElement + metadata.laserLoss + metadata.laserLoss - (2 * calcEckAussenFix());
			sideUpper += createHorizontalSvgPath(sum);
		} else {
			sideUpper += createUpperDownSvgPath();
			let sum = calcData.cabinetHeightlengthElement - metadata.laserLoss - metadata.laserLoss - (2 * calcEckInnenFix());
			sideUpper += createHorizontalSvgPath(sum);
		}
	}

	if (hasHeightGeradeAnzahlAnElementen()) {
		sideUpper += createUpperDownSvgPath();
		sideUpper += createHorizontalSvgPath(metadata.borderElementLength - calcEckAussenFix() - metadata.cornerRadius - calcDiffInnenAussen() + metadata.laserLoss);
		sideUpper += createUpperRightCorner();
	} else { // ungerade
		sideUpper += createUpperUpSvgPath()
		let sum = metadata.borderElementLength - calcEckInnenFix() - metadata.cornerRadius - calcDiffInnenAussen();
		sideUpper += createHorizontalSvgPath(sum);
		sideUpper += createUpperRightCorner();
		sideUpper += createVerticalSvgPath(calcDiffInnenAussen());
	}
	return sideUpper;
}

function createLeftSurfaceRechts() {
	let sideRight = "";
	sideRight += createVerticalSvgPath(metadata.borderElementLength - metadata.cornerRadius - calcEckInnenFix() - metadata.laserLoss - calcDiffInnenAussen());

	// main loop
	for (let i = 0; i < calcData.cabinetWidthNoOfElements; i++) {
		if (((i+1) % 2) == 0) {
			sideRight += createRightLeftSvgPath();
			let sum = calcData.cabinetWidthlengthElement - metadata.laserLoss - metadata.laserLoss - (2 * calcEckInnenFix());
			sideRight += createVerticalSvgPath(sum);
		} else {
			sideRight += createRightRightSvgPath();
			let sum = calcData.cabinetWidthlengthElement + metadata.laserLoss + metadata.laserLoss - (2 * calcEckAussenFix());
			sideRight += createVerticalSvgPath(sum);
		}
	}

	let subtractForUntereLinieStartsHibeiOderHerdau = (hasHeightGeradeAnzahlAnElementen()) ? calcDiffInnenAussen() : 0;
	if (hasWidthGeradeAnzahlAnElementen()) {
		sideRight += createRightRightSvgPath();
		sideRight += createVerticalSvgPath(metadata.borderElementLength - calcEckAussenFix() - metadata.cornerRadius + metadata.laserLoss - subtractForUntereLinieStartsHibeiOderHerdau);
		sideRight += createLowerRightCorner();
		sideRight += createHorizontalSvgPath(-calcDiffInnenAussen());
	} else { // ungerade
		sideRight += createRightLeftSvgPath();
		sideRight += createVerticalSvgPath(metadata.borderElementLength - metadata.laserLoss - calcEckInnenFix() - metadata.cornerRadius - subtractForUntereLinieStartsHibeiOderHerdau);
		sideRight += createLowerRightCorner();
	}
	return sideRight;
}

function createLeftSurfaceUnten() {
	let sideLower = "";
	if (hasHeightGeradeAnzahlAnElementen()) {
		sideLower += createHorizontalSvgPath(-(metadata.borderElementLength - (metadata.laserLoss /2)- calcEckInnenFix() - metadata.cornerRadius - calcDiffInnenAussen()));
	} else { // ungerade
		sideLower += createHorizontalSvgPath(-(metadata.borderElementLength - metadata.laserLoss - calcEckInnenFix() - metadata.cornerRadius - calcDiffInnenAussen()));
	}

	// main loop
	let changer = hasHeightGeradeAnzahlAnElementen() ? 0 : 1;
	for (let i = 0; i < calcData.cabinetHeightNoOfElements; i++) {
		if ((changer % 2) == 0) {
			sideLower += createLowerDownSvgPath();
			sideLower += createHorizontalSvgPath(-(calcData.cabinetHeightlengthElement + metadata.laserLoss + metadata.laserLoss - (2 * calcEckAussenFix())));
		} else {
			sideLower += createLowerUpSvgPath();
			sideLower += createHorizontalSvgPath(-(calcData.cabinetHeightlengthElement - metadata.laserLoss - metadata.laserLoss - (2 * calcEckInnenFix())));
		}
		changer++;
	}
	
	if (hasHeightGeradeAnzahlAnElementen()) {
		sideLower += createLowerDownSvgPath();
		sideLower += createHorizontalSvgPath(-(metadata.borderElementLength + (metadata.laserLoss / 2) - calcEckAussenFix() - metadata.cornerRadius));
		sideLower += createLowerLeftCorner();
	} else { // ungerade
		sideLower += createLowerDownSvgPath();
		let sum = -(metadata.borderElementLength - calcEckInnenFix() - metadata.cornerRadius);
		sideLower += createHorizontalSvgPath(sum);
		sideLower += createLowerLeftCorner();
		sideLower += createVerticalSvgPath(-calcDiffInnenAussen());
	}
	return sideLower;
}

function createLeftSurfaceLinks() {
	let sideLeft = createVerticalSvgPath(-(metadata.cabinetWidth - (2 * metadata.cornerRadius) - ((hasHeightGeradeAnzahlAnElementen()) ? 0 : calcDiffInnenAussen())));
	sideLeft += createUpperLeftCorner();
	return sideLeft;
}

function createSurfaceArea(modelLocal, deterministicName, width, height, startx, starty) {
	modelLocal.paths[deterministicName + "_1"] = new makerjs.paths.Line([startx, starty], [startx + width, starty]);
	modelLocal.paths[deterministicName + "_2"] = new makerjs.paths.Line([startx, starty + height], [startx + width, starty + height]);
	modelLocal.paths[deterministicName + "_3"] = new makerjs.paths.Line([startx, starty], [startx, starty + height]);
	modelLocal.paths[deterministicName + "_4"] = new makerjs.paths.Line([startx + width, starty], [startx + width, starty + height]);
}

function boxSizeCheck() {
	return metadata.cabinetLength + metadata.minDeltaBoxCabinet > metadata.boxLength ||
		metadata.cabinetWidth + metadata.minDeltaBoxCabinet > metadata.boxWidth ||
		metadata.cabinetHeight + metadata.minDeltaBoxCabinet > metadata.boxHeight;
}

function drawPreview() {
	if (boxSizeCheck()) {
			document.getElementById('clickCabinetPreviewDiv').innerHTML = "<div style='width:250px;'><div style='justify-content: center; display:flex'><?xml version='1.0' encoding='iso-8859-1'?> <svg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='200px'  viewBox='0 0 295.996 295.996' style='enable-background:new 0 0 295.996 295.996;' xml:space='preserve'> <g>  <path style='fill:#FFCE00;' d='M270.996,123.998c0-11.334-1.363-22.348-3.907-32.9c-7.269-15.152-17.35-28.708-29.558-39.996   c-22.391-13.376-48.766-20.666-76.771-19.644C83.492,34.274,23.139,99.196,25.955,176.463c0.413,11.304,2.17,22.239,5.087,32.673   c6.303,12.01,14.397,22.938,23.934,32.42c21.892,14.189,47.99,22.44,76.023,22.44C208.316,263.996,270.996,201.316,270.996,123.998   z M197.666,98.998c8.836,0,16,7.164,16,16s-7.164,16-16,16s-16-7.164-16-16S188.83,98.998,197.666,98.998z M98.666,98.998   c8.836,0,16,7.164,16,16s-7.164,16-16,16s-16-7.164-16-16S89.83,98.998,98.666,98.998z M87.959,215.396l-12.633-9.82   c21.441-27.579,57.392-40.777,91.587-33.631c21.262,4.447,40.353,16.391,53.756,33.631l-12.631,9.82   c-11.078-14.249-26.847-24.118-44.4-27.789C135.382,181.697,105.675,192.607,87.959,215.396z'/>  <path style='fill:#FFB100;' d='M267.089,91.098c2.544,10.553,3.907,21.566,3.907,32.9c0,77.318-62.68,139.998-139.998,139.998   c-28.032,0-54.131-8.251-76.023-22.44c23.88,23.744,56.766,38.44,93.023,38.44c72.784,0,131.998-59.214,131.998-131.998   C279.996,127.636,275.358,108.337,267.089,91.098z'/>  <path style='fill:#FFE454;' d='M160.76,31.457c28.006-1.021,54.381,6.268,76.771,19.644C213.985,29.328,182.521,16,147.998,16   C75.214,16,16,75.214,16,147.998c0,22.049,5.442,42.849,15.042,61.138c-2.917-10.434-4.674-21.369-5.087-32.673   C23.139,99.196,83.492,34.274,160.76,31.457z'/>  <path d='M147.998,0C66.392,0,0,66.392,0,147.998s66.392,147.998,147.998,147.998s147.998-66.392,147.998-147.998   S229.604,0,147.998,0z M147.998,279.996c-36.257,0-69.143-14.696-93.023-38.44c-9.536-9.482-17.631-20.41-23.934-32.42   C21.442,190.847,16,170.047,16,147.998C16,75.214,75.214,16,147.998,16c34.523,0,65.987,13.328,89.533,35.102   c12.208,11.288,22.289,24.844,29.558,39.996c8.27,17.239,12.907,36.538,12.907,56.9   C279.996,220.782,220.782,279.996,147.998,279.996z'/>  <path d='M163.638,187.607c17.554,3.671,33.322,13.54,44.4,27.789l12.631-9.82c-13.402-17.24-32.494-29.184-53.756-33.631   c-34.195-7.146-70.146,6.052-91.587,33.631l12.633,9.82C105.675,192.607,135.382,181.697,163.638,187.607z'/>  <circle cx='98.666' cy='114.998' r='16'/>  <circle cx='197.666' cy='114.998' r='16'/> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </svg></div> "
				+ " <div style='color:#aa2222;text-align:center'> Der Karton ist zu klein :-( </div></div> ";
			document.getElementById('downloadDXF').style.visibility = "hidden";
			document.getElementById('downloadSVG').style.visibility = "hidden";
			return;
	}

	var svg = makerjs.exporter.toSVG(model, {svgAttrs : {"width" : calculateTotalWidth() + "px", "height" : calculateTotalHeight() + "px", "id" : "preViewSvg" } });
		
	document.getElementById('clickCabinetPreviewDiv').innerHTML = "<div id='backgroundDiv'></div>";
	
	document.getElementById('backgroundDiv').innerHTML = "<div id='contentDiv'></div>";
	
	document.getElementById('contentDiv').innerHTML = svg;
	document.getElementById('contentDiv').style.position = "relative";

	let viewBoxAttrib = "-1 -1 " + (calculateTotalWidth() + 2) + " " + (calculateTotalHeight() + 2) ;
	document.getElementById('preViewSvg').setAttribute("viewBox", viewBoxAttrib);

	let g = document.querySelector('#preViewSvg>g');
	g.style="stroke-width:0.05mm";

	document.getElementById('downloadDXF').style.visibility = "";
	document.getElementById('downloadSVG').style.visibility = "";
	
	document.getElementById("cabinetWidth").value = metadata.cabinetWidth;
	document.getElementById("cabinetHeight").value = metadata.cabinetHeight;
	document.getElementById("cabinetLength").value = metadata.cabinetLength;
}

function calculateTotalWidth() {
	return metadata.cabinetHeight + 10 + metadata.cabinetLength + 10 + metadata.cabinetHeight + 2;
}

function calculateTotalHeight() {
	return metadata.cabinetHeight + 10 + metadata.cabinetWidth + 10 + metadata.cabinetHeight + 2;
}

function download(data, filename, type) {
        var file = new Blob([data], {type: type});
        if (window.navigator.msSaveOrOpenBlob) // IE10+
            window.navigator.msSaveOrOpenBlob(file, filename);
        else { // Others
            var a = document.createElement("a"),
                    url = URL.createObjectURL(file);
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            setTimeout(function() {
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);  
            }, 0); 
        }
    }

function downloadDXF() {
	var dxfExp = makerjs.exporter.toDXF(model, { fontSize: 4 })
	download(dxfExp, "Click Vitrine " + document.getElementById('auftragsNummer').value + ".dxf", "dxf")
}

function downloadSVG() {
	download(convertSVG(), "Click Vitrine " + document.getElementById('auftragsNummer').value + ".svg", "svg")
}

function convertSVG() {
	var svgExp = '<?xml version="1.0" encoding="UTF-8"?>' + 
		makerjs.exporter.toSVG(model, { 
			units: makerjs.unitType.Millimeter, 
			svgAttrs : {
				"width" : (calculateTotalWidth() + "mm"), 
				"height" : (calculateTotalHeight() + "mm"), 
				"xmlns" : "http://www.w3.org/2000/svg",
				"xmlns:xlink" : "http://www.w3.org/1999/xlink",
				"version" : "1.1",
				"baseProfile" : "full"
						}
		}) + "\n";
	return svgExp;
}

function genericChanged(elementId, metaDataFieldName, checkFkt) {
	var intValue = parseInt(document.getElementById(elementId).value);
	document.getElementById(elementId).value = intValue;
	let checkFktResult = true;
	if (checkFkt) {
		let checkFktReturn = checkFkt(intValue);
		checkFktResult = checkFktReturn.checkResult;
		if (!checkFktResult && document.getElementById(elementId + "ErrorMsg")) {
			document.getElementById(elementId + "ErrorMsg").innerHTML = checkFktReturn.errorMessage;
		}
	}
	if (!isNaN(intValue) && checkFktResult) {
		document.getElementById(elementId).style.backgroundColor = "";
		if (document.getElementById(elementId + "ErrorMsg")) {
			document.getElementById(elementId + "ErrorMsg").innerHTML = "";
		}
		metadata[metaDataFieldName] = intValue;
		return true;
	} else {
	    document.getElementById(elementId).style.backgroundColor = "#d87979";
		return false;
	}
}

function cabinetLengthChanged() {
	document.getElementById("infoMessage").innerHTML = "";
	document.getElementById("infoMessage").style.backgroundColor = "";

	if (genericChanged("cabinetLength", "cabinetLength", checkNumberRange)) {
		model = createModel();
		drawPreview();
	}
}

function checkNumberRange(toCheck) {
	let toCheckInt = parseInt(toCheck);

	if (isNaN(toCheckInt)) {
		return {
			checkResult: false,
			errorMessage: "natürliche Zahl zwischen " + metadata.minSideLength + " und " + metadata.maxSideLength + "."
		};
	}

	let checkResultBool = toCheckInt >= 50 && toCheckInt <= 1000;
	return {
		checkResult: checkResultBool,
		errorMessage: "natürliche Zahl zwischen " + metadata.minSideLength + " und " + metadata.maxSideLength + "."
	};
}

function cabinetWidthChanged() {
	document.getElementById("infoMessage").innerHTML = "";
	document.getElementById("infoMessage").style.backgroundColor = "";

	if (genericChanged("cabinetWidth", "cabinetWidth", checkNumberRange)) {
		model = createModel();
		drawPreview();
	}
}

function cabinetHeightChanged() {
	let length = parseInt(document.getElementById("cabinetLength").value);
	let width = parseInt(document.getElementById("cabinetWidth").value);
	let height = parseInt(document.getElementById("cabinetHeight").value);
	
	let lbh = [length, width, height];
	lbh.sort(function(a, b){return a-b});
	lbh.reverse();

	let toSortDesc = (length != lbh[0]) || (width != lbh[1]) || (height != lbh[2]);

	if (genericChanged("cabinetHeight", "cabinetHeight", checkNumberRange)) {
		if (toSortDesc){
			document.getElementById("infoMessage").innerHTML = "Achtung Länge, Breite und Höhe wurden absteigent sortiert!";
			document.getElementById("infoMessage").style.backgroundColor = "yellow";

			document.getElementById("cabinetLength").value = lbh[0];
			document.getElementById("cabinetWidth").value = lbh[1];
			document.getElementById("cabinetHeight").value = lbh[2];

			metadata.cabinetLength = lbh[0];
			metadata.cabinetWidth = lbh[1];
			metadata.cabinetHeight = lbh[2];

		} else {
			document.getElementById("infoMessage").innerHTML = "";
			document.getElementById("infoMessage").style.backgroundColor = "";
		}
		model = createModel();
		drawPreview();
	}
}

function processAlsoFloorChanged() {
	let processAlsoFloor = document.getElementById("processAlsoFloor").checked;
	metadata["processAlsoFloor"] = processAlsoFloor;
	model = createModel();
	drawPreview();
}

function materialThicknessChanged() {
	let materialThickness = parseFloat(document.querySelector('input[name="materialThicknessRadio"]:checked').value);
	if (materialThickness != 1.5) {
		materialThickness = 1.5;
		document.getElementById("ratio1dot5mm").checked = true;
		alert("Sorry daweil nur 1.5 mm unterstützt");
	}
	metadata["processAlsoFloor"] = materialThickness;
	model = createModel();
	drawPreview();
}

function replaceValues(input) {
	return input.replaceAll("xr1",  metadata.radius1)
				.replaceAll("xr2",  metadata.radius2)
				.replaceAll("xr3",  metadata.radius3)
				.replaceAll("xr4",  metadata.radius4)
				.replaceAll("xx1",  0).replaceAll("xy1",  0)
				.replaceAll("xl1",  metadata.length1).replaceAll("xl2",  metadata.length2).replaceAll("xl3",  metadata.length3);
}

function createUpperUpSvgPath() {
	let upperUp = "";
	//addHistoryLog(0, 0);
	upperUp += "m xx1,xy1 ";
	addHistoryLog(metadata.radius1, -metadata.radius1);
	upperUp += "a xr1 xr1 0 0 0  xr1 -xr1 ";
	addHistoryLog(0, -metadata.length1, "aaaaaaaaaaaaaaaaaaaaaaaaaa upper up", true);
	upperUp += "v -xl1 ";
	addHistoryLog(-metadata.radius2, -metadata.radius2);
	upperUp += "a xr2 xr2 0 0 0 -xr2 -xr2 ";
	addHistoryLog(-metadata.length2, 0);
	upperUp += "h -xl2 ";
	addHistoryLog(-metadata.radius3, -metadata.radius3);
	upperUp += "a xr3 xr3 0 0 1 -xr3 -xr3 ";
	addHistoryLog(0, -metadata.length3);
	upperUp += "v -xl3 ";
	addHistoryLog(metadata.radius4, -metadata.radius4);
	upperUp += "a xr4 xr4 0 0 1  xr4 -xr4 ";
	return replaceValues(upperUp);
}

function createUpperDownSvgPath() {
	let upperDown = "";
	upperDown += "m xx1,xy1 ";
	addHistoryLog(metadata.radius4, metadata.radius4);
	upperDown += "a xr4 xr4 0 0 1 xr4 xr4 ";
	addHistoryLog(0, metadata.length3);
	upperDown += "v xl3 ";
	addHistoryLog(-metadata.radius3, metadata.radius3);
	upperDown += "a xr3 xr3 0 0 1 -xr3 xr3 ";
	addHistoryLog(-metadata.length2, 0);
	upperDown += "h -xl2 ";
	addHistoryLog(-metadata.radius2, metadata.radius2);
	upperDown += "a xr2 xr2 0 0 0 -xr2 xr2 ";
	addHistoryLog(0, metadata.length1, "aaaaaaaaaaaaaaaaaaaaaaaaaa upper down", true);
	upperDown += "v xl1 ";
	addHistoryLog(metadata.radius1, metadata.radius1);
	upperDown += "a xr1 xr1 0 0 0 xr1 xr1 ";
	return replaceValues(upperDown);
}
	
function createLowerDownSvgPath() {
	let lowerDown = "";
	lowerDown += "m xx1,xy1 ";
	addHistoryLog(-metadata.radius1, metadata.radius1);
	lowerDown += "a xr1 xr1 0 0 0 -xr1 xr1 ";
	addHistoryLog(0, metadata.length1, "aaaaaaaaaaaaaaaaaaaaaaaaaa lower down", true);
	lowerDown += "v xl1 ";
	addHistoryLog(metadata.radius2, metadata.radius2);
	lowerDown += "a xr2 xr2 0 0 0  xr2 xr2 ";
	addHistoryLog(metadata.length2, 0);
	lowerDown += "h xl2 ";
	addHistoryLog(metadata.radius3, metadata.radius3);
	lowerDown += "a xr3 xr3 0 0 1  xr3 xr3 ";
	addHistoryLog(0, metadata.length3);
	lowerDown += "v xl3 ";
	addHistoryLog(-metadata.radius4, metadata.radius4);
	lowerDown += "a xr4 xr4 0 0 1 -xr4 xr4 ";
	return replaceValues(lowerDown);
}

function createLowerUpSvgPath() {
	let lowerUp = "";
	lowerUp += "m xx1,xy1 ";
	addHistoryLog(-metadata.radius4, -metadata.radius4);
	lowerUp += "a xr4 xr4 0 0 1 -xr4 -xr4 ";
	addHistoryLog(0, metadata.length3);
	lowerUp += "v -xl3 ";
	addHistoryLog(metadata.radius3, -metadata.radius3);
	lowerUp += "a xr3 xr3 0 0 1  xr3 -xr3 ";
	addHistoryLog(metadata.length2, 0);
	lowerUp += "h xl2 ";
	addHistoryLog(metadata.radius2, -metadata.radius2);
	lowerUp += "a xr2 xr2 0 0 0  xr2 -xr2 ";
	addHistoryLog(0, -metadata.length1, "aaaaaaaaaaaaaaaaaaaaaaaaaa lower up", true);
	lowerUp += "v -xl1 ";
	addHistoryLog(-metadata.radius1, -metadata.radius1);
	lowerUp += "a xr1 xr1 0 0 0 -xr1 -xr1 ";
	return replaceValues(lowerUp);
}

function createRightRightSvgPath() {
	let rightRight = "";
	rightRight += "m xx1,xy1 ";
	addHistoryLog(metadata.radius1, metadata.radius1);
	rightRight += "a xr1 xr1 0 0 0 xr1  xr1 ";
	addHistoryLog(metadata.length1, 0, "aaaaaaaaaaaaaaaaaaaaaaaaaa right right", true);
	rightRight += "h xl1 ";
	addHistoryLog(metadata.radius2, -metadata.radius2);
	rightRight += "a xr2 xr2 0 0 0 xr2 -xr2 ";
	addHistoryLog(0, -metadata.length2);
	rightRight += "v -xl2 ";
	addHistoryLog(metadata.radius3, -metadata.radius3);
	rightRight += "a xr3 xr3 0 0 1 xr3 -xr3 ";
	addHistoryLog(metadata.length3, 0);
	rightRight += "h xl3 ";
	addHistoryLog(metadata.radius4, metadata.radius4);
	rightRight += "a xr4 xr4 0 0 1 xr4  xr4 ";
	return replaceValues(rightRight);
}

function createRightLeftSvgPath() {
	let rightLeft = "";
	rightLeft += "m xx1,xy1 ";
	addHistoryLog(-metadata.radius4, metadata.radius4);
	rightLeft += "a xr4 xr4 0 0 1 -xr4  xr4 ";
	addHistoryLog(-metadata.length3, 0);
	rightLeft += "h -xl3 ";
	addHistoryLog(-metadata.radius3, -metadata.radius3);
	rightLeft += "a xr3 xr3 0 0 1 -xr3 -xr3 ";
	addHistoryLog(0, -metadata.length2);
	rightLeft += "v -xl2 ";
	addHistoryLog(-metadata.radius2, -metadata.radius2);
	rightLeft += "a xr2 xr2 0 0 0 -xr2 -xr2 ";
	addHistoryLog(-metadata.length1, 0, "aaaaaaaaaaaaaaaaaaaaaaaaaa right left", true);
	rightLeft += "h -xl1 ";
	addHistoryLog(-metadata.radius1, metadata.radius1);
	rightLeft += "a xr1 xr1 0 0 0 -xr1  xr1 ";
	return replaceValues(rightLeft);
}

function createLeftLeftSvgPath() {
	let leftLeft = "";
	leftLeft += "m xx1,xy1 ";
	addHistoryLog(-metadata.radius1, -metadata.radius1);
	leftLeft += "a xr1 xr1 0 0 0 -xr1 -xr1 ";
	addHistoryLog(-metadata.length1, 0, "aaaaaaaaaaaaaaaaaaaaaaaaaa left left", true);
	leftLeft += "h -xl1 ";
	addHistoryLog(-metadata.radius2, metadata.radius2);
	leftLeft += "a xr2 xr2 0 0 0 -xr2  xr2 ";
	addHistoryLog(0, metadata.length2);
	leftLeft += "v xl2 ";
	addHistoryLog(-metadata.radius3, metadata.radius3);
	leftLeft += "a xr3 xr3 0 0 1 -xr3  xr3 ";
	addHistoryLog(-metadata.length3, 0);
	leftLeft += "h -xl3 ";
	addHistoryLog(-metadata.radius4, -metadata.radius4);
	leftLeft += "a xr4 xr4 0 0 1 -xr4 -xr4 ";
	return replaceValues(leftLeft);
}

function createLeftRightSvgPath() {
	let leftRight = "";
	leftRight += "m xx1,xy1 ";
	addHistoryLog(metadata.radius4, -metadata.radius4);
	leftRight += "a xr4 xr4 0 0 1 xr4 -xr4 ";
	addHistoryLog(metadata.length3, 0);
	leftRight += "h xl3 ";
	addHistoryLog(metadata.radius3, metadata.radius3);
	leftRight += "a xr3 xr3 0 0 1 xr3  xr3 ";
	addHistoryLog(0, metadata.length2);
	leftRight += "v xl2 ";
	addHistoryLog(metadata.radius2, metadata.radius2);
	leftRight += "a xr2 xr2 0 0 0 xr2  xr2 ";
	addHistoryLog(metadata.length1, 0, "aaaaaaaaaaaaaaaaaaaaaaaaaa left right", true);
	leftRight += "h xl1 ";
	addHistoryLog(metadata.radius1, -metadata.radius1);
	leftRight += "a xr1 xr1 0 0 0 xr1 -xr1 ";
	return replaceValues(leftRight);
}

function createHorizontalSvgPath(length) {
	addHistoryLog(length, 0, "h");
	return "h " + length + " ";
}

function createVerticalSvgPath(length) {
	addHistoryLog(0, length, "v");
	return "v " + length + " ";
}

function calcEckAussenFix() {
	return metadata.radius4 - metadata.radius3 - metadata.length2 - metadata.radius3;
}

function calcEckInnenFix() {
	return metadata.radius1;
}

function calcDiffInnenAussen() {
	return metadata.radius1 + metadata.length1 + metadata.radius2 + metadata.radius3 + metadata.length3 + metadata.radius4;
}

function createStartPos(x, y) {
	initHistoryLog(x, y);
	return "M " + x + " " + y + " ";
}

function createUpperLeftCorner() {
	addHistoryLog(metadata.cornerRadius, -metadata.cornerRadius, "upper Left => y is Top again", true);
	return "a " + metadata.cornerRadius + " " + metadata.cornerRadius + " 0 0 1 " + metadata.cornerRadius + " -" + metadata.cornerRadius + "";
}

function createUpperRightCorner() {
	addHistoryLog(metadata.cornerRadius, metadata.cornerRadius, "upper Right => x is right side", true);
	return "a " + metadata.cornerRadius + " " + metadata.cornerRadius + " 0 0 1 " + metadata.cornerRadius + " " + metadata.cornerRadius + "";
}

function createLowerRightCorner() {
	addHistoryLog(-metadata.cornerRadius, metadata.cornerRadius, "lower right => y is bottom side", true);
	return "a " + metadata.cornerRadius + " " + metadata.cornerRadius + " 0 0 1 -" + metadata.cornerRadius + " " + metadata.cornerRadius + "";
}

function createLowerLeftCorner() {
	addHistoryLog(-metadata.cornerRadius, -metadata.cornerRadius, "lower Left => x is left side again", true);
	return "a " + metadata.cornerRadius + " " + metadata.cornerRadius + " 0 0 1 -" + metadata.cornerRadius + " -" + metadata.cornerRadius + "";
}

function determineNoOfElementsIncludingTheHalf(edgeLengthInMM) {
	let numberOfElements = Math. trunc(edgeLengthInMM / 25);
	if ((numberOfElements % 2) === 1) {
		numberOfElements--;
	}
	let sizeOfElement = edgeLengthInMM / numberOfElements;
	if (sizeOfElement > 45) {
		numberOfElements += 2;
		//sizeOfElement = edgeLengthInMM / numberOfElements;
	}
	return numberOfElements + 1; // "split" the first half and the last half as calculated Elements
}

function initHistoryLog(x, y) {
	if (!metadata.log) {
		return;
	}
	posLog.x = x;
	posLog.y = y;
	posLog.history = [];
	posLog.history.push({"absX" : posLog.x, "absY" : posLog.y, "relX" : x, "relY" : y, "comment": "initial"});

	poslogImportant.history = [];
	poslogImportant.history.push({"absX" : posLog.x, "absY" : posLog.y, "comment": "initial"});
}

function addHistoryLog(x, y, comment, important) {
	if (!metadata.log) {
		return;
	}
	if (!comment) {
		comment = "";
	}
	posLog.x += x;
	posLog.y += y;
	posLog.history.push({"absX" : posLog.x, "absY" : posLog.y, "relX" : x, "relY" : y,"comment": comment});
	if (important) {
		poslogImportant.history.push({"absX" : posLog.x, "absY" : posLog.y,"comment": comment});
	}
}

function logHistoryLog() {
	if (!metadata.log) {
		return;
	}
	console.log("Importat");
	console.log(JSON.stringify(poslogImportant));
	console.log("All of them");
	console.log(JSON.stringify(posLog));
}

</script>
</body>
</html>