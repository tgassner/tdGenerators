<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Click Vitrinen Generator</title>
<!-- <script src="https://cdn.jsdelivr.net/npm/makerjs@0/target/js/browser.maker.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bezier-js@2/bezier.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/opentype.js@0/dist/opentype.js"></script> -->

<script src="lib/browser.maker.js"></script>
<script src="lib/bezier.js"></script>
<script src="lib/opentype.js"></script>
<!-- <script src="lib/gl-matrix.js"></script> -->

<script type="text/javascript">
	var makerjs = require('makerjs');
</script>
</head>
<body>
<h1 style="margin-top: 5px;margin-bottom: 2px;">Click Vitrinen Generator</h1>
<div style="margin-top: 0px;margin-bottom: 15px;">Version 0.1 &nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;16.11.2022 by Gassi</div>

<div id="logodiv" style="background: linear-gradient(to left, #ffcd00, #ffcd14 , #ffcd00);width:fit-content; right:0px;position:absolute;top:0px;padding:20px">
	<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg  xmlns:dc="http://purl.org/dc/elements/1.1/"  xmlns:cc="http://creativecommons.org/ns#"  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"  xmlns:svg="http://www.w3.org/2000/svg"  xmlns="http://www.w3.org/2000/svg"  xmlns:xlink="http://www.w3.org/1999/xlink"  id="svg8"  version="1.1"  viewBox="0 0 50.469002 15.519"  height="15.519mm"  width="50.469002mm">  <defs  id="defs2">  <rect  id="SVGID_1_"  x="22.370001"  y="29.84"  width="181.41"  height="181.41" />  <rect  id="SVGID_3_"  x="54.110001"  y="146.83"  width="120.25"  height="24.34" />  <rect  id="SVGID_5_"  x="54.110001"  y="146.83"  width="120.25"  height="24.34" />  <rect  id="SVGID_7_"  x="54.110001"  y="121.56"  width="121.28"  height="23.139999" />  <rect  id="SVGID_9_"  x="54.110001"  y="121.56"  width="121.28"  height="23.139999" />  <path  id="SVGID_11_"  d="m 168.62,135.89 c 0.54,0.29 0.91,0.55 1.1,0.79 0.2,0.24 0.3,0.6 0.3,1.07 v 0.47 c 0,1.02 -0.89,1.52 -2.67,1.52 -1.78,0 -3.38,-0.3 -4.79,-0.9 v 4.51 c 1.14,0.48 2.83,0.71 5.08,0.71 2.25,0 4,-0.45 5.24,-1.35 1.24,-0.9 1.87,-2.19 1.87,-3.87 v -1.93 c 0,-0.11 -0.03,-0.21 -0.04,-0.31 -2.3,-0.47 -4.7,-0.91 -7.21,-1.32 z m -113.87,0.43 v 7.59 h 4.7 v -6.22 h 2.33 c 1.68,0 3,-0.4 3.96,-1.21 0.65,-0.54 1.06,-1.28 1.27,-2.17 -4.34,0.59 -8.44,1.26 -12.26,2.01 M 69.41,134 v 9.91 h 10.48 v -3.92 h -5.75 v -6.56 c -1.61,0.18 -3.18,0.37 -4.73,0.57 m 76.16,9.91 h 4.45 l 0.84,-4.97 h 4.26 l 0.9,4.97 h 4.45 l -1.92,-9.92 c -1.44,-0.18 -2.9,-0.36 -4.39,-0.52 l 0.27,1.52 h -2.92 l 0.3,-1.77 c -1.34,-0.14 -2.7,-0.27 -4.07,-0.39 z m -64.2,-11.18 v 11.18 h 10.92 v -4.04 h -6.25 v -4.85 h 5.41 V 132 c -3.45,0.2 -6.81,0.44 -10.08,0.73 m 52.82,11.18 h 10.48 v -3.92 h -5.75 v -7.84 c -1.56,-0.1 -3.13,-0.19 -4.73,-0.27 z m -35.91,-12.23 0.64,1.5 -4.6,10.73 h 5.07 l 2.11,-5.88 1.99,5.88 h 5.07 l -4.63,-10.73 0.73,-1.71 c -2.15,0.05 -4.28,0.13 -6.38,0.21 m 20.44,7.16 c 0,1.66 0.58,2.94 1.73,3.86 1.15,0.91 2.84,1.37 5.05,1.37 2.21,0 4.14,-0.43 5.75,-1.31 v -10.42 h -4.54 v 7.28 c -0.33,0.17 -0.8,0.25 -1.42,0.25 -0.61,0 -1.07,-0.13 -1.38,-0.39 -0.31,-0.26 -0.47,-0.64 -0.47,-1.13 v -6.87 c -1.56,-0.04 -3.14,-0.06 -4.73,-0.08 v 7.44 z m -8.04,-7.45 v 12.52 h 4.73 v -12.53 c -0.47,0 -0.93,-0.01 -1.4,-0.01 -1.12,0 -2.22,0.01 -3.33,0.02" />  <rect  id="SVGID_17_"  x="170.49001"  y="118.36"  width="16.209999"  height="9.5900002" />  <clipPath  id="SVGID_2_">    <use  height="100%"  width="100%"  y="0"  x="0"  xlink:href="#SVGID_1_"  style="overflow:visible"  id="use19" />    </clipPath>  </defs>  <metadata  id="metadata5">  <rdf:RDF>  <cc:Work  rdf:about="">  <dc:format>image/svg+xml</dc:format>  <dc:type  rdf:resource="http://purl.org/dc/dcmitype/StillImage" />  <dc:title></dc:title>  </cc:Work>  </rdf:RDF>  </metadata>  <g  transform="translate(0,-281.481)"  id="layer1">  <g  id="g358">  <g  style="fill:#fff9d1"  id="g40"  clip-path="url(#SVGID_2_)"  class="st1"  transform="matrix(0.26458333,0,0,0.26458333,2.7061703,251.01424)">    <g  id="g38">     <defs  id="defs23" />      <clipPath  id="SVGID_4_">      <use  id="use25"  style="overflow:visible"  xlink:href="#SVGID_3_"  x="0"  y="0"  width="100%"  height="100%" />      </clipPath>      <g  id="g36"  clip-path="url(#SVGID_4_)"  class="st2">      <defs  id="defs29" />       <clipPath  id="SVGID_6_">       <use  id="use31"  style="overflow:visible"  xlink:href="#SVGID_5_"  x="0"  y="0"  width="100%"  height="100%" />       </clipPath>       <path  id="path34"  clip-path="url(#SVGID_6_)"  d="m 163.69,151.53 c -0.88,0 -1.9,0.25 -3.08,0.74 v -0.68 h -1.79 v 14.98 h 1.87 v -12.61 c 0.96,-0.46 1.86,-0.68 2.68,-0.68 1.3,0 1.95,0.64 1.95,1.92 v 11.37 h 1.87 V 155.2 c 0,-0.44 -0.04,-0.79 -0.13,-1.05 0.95,-0.58 1.9,-0.87 2.84,-0.87 1.28,0 1.92,0.64 1.92,1.92 v 11.37 h 1.9 V 155 c 0,-1.11 -0.32,-1.96 -0.95,-2.57 -0.63,-0.61 -1.55,-0.91 -2.74,-0.91 -1.19,0 -2.4,0.36 -3.61,1.08 -0.63,-0.71 -1.54,-1.07 -2.73,-1.07 m -8.56,0.1 c -0.18,0.05 -0.31,0.09 -0.41,0.12 -0.1,0.03 -0.24,0.09 -0.42,0.2 -0.18,0.11 -0.3,0.17 -0.34,0.2 -0.04,0.03 -0.18,0.12 -0.4,0.28 -0.22,0.16 -0.36,0.25 -0.41,0.29 v -1.13 h -1.79 v 14.98 h 1.87 V 154.5 c 0.53,-0.37 0.87,-0.61 1.03,-0.71 0.51,-0.33 1.08,-0.5 1.71,-0.5 h 0.9 v -1.79 h -0.66 c -0.46,0 -0.82,0.05 -1.08,0.13 m -15.66,11.11 c 0,1.25 0.35,2.24 1.05,2.97 0.7,0.74 1.77,1.11 3.21,1.11 1.44,0 2.51,-0.37 3.21,-1.11 0.7,-0.74 1.05,-1.73 1.05,-2.97 v -7.35 c 0,-1.25 -0.35,-2.24 -1.05,-2.97 -0.7,-0.74 -1.77,-1.11 -3.21,-1.11 -1.44,0 -2.51,0.37 -3.21,1.11 -0.7,0.74 -1.05,1.73 -1.05,2.97 z m 6.68,-0.02 c 0,1.65 -0.81,2.47 -2.42,2.47 -1.62,0 -2.42,-0.82 -2.42,-2.47 v -7.29 c 0,-1.63 0.81,-2.45 2.42,-2.45 1.61,0 2.42,0.82 2.42,2.45 z m -16.19,3.84 h 1.87 v -7.71 h 5.29 v -1.69 h -5.29 v -6.63 h 5.58 v -1.66 h -7.45 z m -8.66,-14.93 c -0.18,0.05 -0.31,0.09 -0.41,0.12 -0.1,0.03 -0.24,0.09 -0.42,0.2 -0.18,0.11 -0.3,0.17 -0.34,0.2 -0.04,0.03 -0.18,0.12 -0.4,0.28 -0.22,0.16 -0.36,0.25 -0.41,0.29 v -1.13 h -1.79 v 14.98 h 1.87 V 154.5 c 0.53,-0.37 0.87,-0.61 1.03,-0.71 0.51,-0.33 1.08,-0.5 1.71,-0.5 h 0.9 v -1.79 h -0.66 c -0.45,0 -0.81,0.05 -1.08,0.13 m -13.66,3.79 c 0,-1.65 0.82,-2.47 2.45,-2.47 1.63,0 2.45,0.83 2.45,2.47 v 3.03 h -4.9 z m 3.11,11.27 c 1.21,0 2.25,-0.14 3.13,-0.42 v -1.74 c -1.11,0.32 -2.18,0.47 -3.21,0.47 -1.04,0 -1.8,-0.19 -2.29,-0.58 -0.49,-0.39 -0.74,-0.97 -0.74,-1.76 V 160 h 6.69 v -4.58 c 0,-1.25 -0.35,-2.24 -1.04,-2.99 -0.69,-0.75 -1.76,-1.12 -3.2,-1.12 -1.44,0 -2.51,0.37 -3.22,1.12 -0.71,0.75 -1.07,1.74 -1.07,2.99 v 7.32 c 0,2.64 1.65,3.95 4.95,3.95 m -10.19,-15.11 h -2.47 c -1.23,0 -2.21,0.35 -2.95,1.04 -0.74,0.69 -1.11,1.66 -1.11,2.91 v 7.34 c 0,1.21 0.31,2.14 0.94,2.79 0.62,0.65 1.52,0.97 2.7,0.97 1.18,0 2.16,-0.32 2.95,-0.95 v 0.87 h 1.82 l 0.44,-18.95 H 101 Z m 0,12.48 c -0.63,0.6 -1.47,0.9 -2.53,0.9 -1.42,0 -2.13,-0.74 -2.13,-2.21 v -7.19 c 0,-1.51 0.83,-2.26 2.5,-2.26 h 2.16 z m -16.17,-8.64 c 0,-1.65 0.82,-2.47 2.45,-2.47 1.63,0 2.45,0.83 2.45,2.47 v 3.03 h -4.9 z m 3.11,11.27 c 1.21,0 2.25,-0.14 3.13,-0.42 v -1.74 c -1.11,0.32 -2.18,0.47 -3.21,0.47 -1.04,0 -1.8,-0.19 -2.29,-0.58 -0.49,-0.39 -0.74,-0.97 -0.74,-1.76 V 160 h 6.69 v -4.58 c 0,-1.25 -0.35,-2.24 -1.04,-2.99 -0.69,-0.75 -1.76,-1.12 -3.2,-1.12 -1.44,0 -2.51,0.37 -3.22,1.12 -0.71,0.75 -1.07,1.74 -1.07,2.99 v 7.32 c 0,2.64 1.65,3.95 4.95,3.95 m -10.19,0.11 c 0,0.72 -0.14,1.24 -0.42,1.55 -0.28,0.32 -0.73,0.47 -1.34,0.47 -0.19,0 -0.43,-0.02 -0.71,-0.05 v 1.68 c 0.26,0.05 0.52,0.08 0.76,0.08 1.18,0 2.07,-0.33 2.67,-0.99 0.61,-0.66 0.91,-1.58 0.91,-2.75 v -15.11 h -1.87 z m 2.08,-18.12 c 0,-0.81 -0.38,-1.21 -1.14,-1.21 -0.76,0 -1.15,0.4 -1.15,1.21 0,0.81 0.38,1.21 1.15,1.21 0.77,0 1.14,-0.4 1.14,-1.21 m -17.14,2.9 h -1.79 v 14.98 h 1.87 v -12.61 c 0.97,-0.46 1.86,-0.68 2.69,-0.68 1.3,0 1.95,0.64 1.95,1.92 v 11.37 h 1.87 V 155 c 0,-1.11 -0.32,-1.96 -0.95,-2.57 -0.63,-0.61 -1.43,-0.91 -2.41,-0.91 -0.98,0 -2.05,0.25 -3.22,0.74 v -0.68 z m -7.29,14.98 h 1.87 v -14.87 h -1.87 z m 2.08,-17.88 c 0,-0.81 -0.38,-1.21 -1.14,-1.21 -0.76,0 -1.15,0.4 -1.15,1.21 0,0.81 0.38,1.21 1.15,1.21 0.76,0.01 1.14,-0.4 1.14,-1.21"  class="st3"  style="fill:#647a84" />      </g>     </g>    </g>  <g  style="fill:#fff9d1"  id="g77"  clip-path="url(#SVGID_2_)"  class="st1"  transform="matrix(0.26458333,0,0,0.26458333,2.7061703,251.01424)">    <g  id="g75">     <defs  id="defs43" />      <clipPath  id="SVGID_8_">      <use  id="use45"  style="overflow:visible"  xlink:href="#SVGID_7_"  x="0"  y="0"  width="100%"  height="100%" />      </clipPath>      <g  id="g56"  clip-path="url(#SVGID_8_)"  class="st4">      <defs  id="defs49" />       <clipPath  id="SVGID_10_">       <use  id="use51"  style="overflow:visible"  xlink:href="#SVGID_9_"  x="0"  y="0"  width="100%"  height="100%" />       </clipPath>       <path  id="path54"  clip-path="url(#SVGID_10_)"  d="m 162.28,129.36 c 0,2.03 1.01,3.61 3.02,4.73 l 3.33,1.8 c 0.54,0.29 0.91,0.56 1.1,0.79 0.2,0.24 0.3,0.6 0.3,1.07 v 0.47 c 0,1.02 -0.89,1.52 -2.67,1.52 -1.78,0 -3.38,-0.3 -4.79,-0.9 v 4.51 c 1.14,0.48 2.83,0.72 5.08,0.72 2.25,0 4,-0.45 5.24,-1.35 1.24,-0.9 1.87,-2.19 1.87,-3.87 v -1.93 c 0,-1.87 -0.85,-3.26 -2.55,-4.2 l -3.55,-1.99 c -0.66,-0.35 -1.09,-0.67 -1.29,-0.95 -0.2,-0.28 -0.3,-0.71 -0.3,-1.29 v -0.47 c 0,-0.48 0.14,-0.85 0.44,-1.1 0.29,-0.26 0.85,-0.39 1.68,-0.39 1.62,0 3.06,0.27 4.32,0.81 v -4.48 c -1.04,-0.44 -2.61,-0.65 -4.71,-0.65 -2.1,0 -3.72,0.45 -4.84,1.35 -1.12,0.9 -1.68,2.18 -1.68,3.84 z m -9.34,-2.71 1.49,8.33 h -2.92 z m 7.52,17.26 -4.17,-21.55 h -6.5 l -4.23,21.55 h 4.45 l 0.84,-4.98 h 4.26 l 0.9,4.98 z m -26.27,0 h 10.48 v -3.92 h -5.75 v -17.63 h -4.73 z m -15.47,-5.07 c 0,1.66 0.58,2.94 1.73,3.86 1.15,0.91 2.84,1.37 5.05,1.37 2.22,0 4.14,-0.44 5.75,-1.31 v -10.42 h -4.54 v 7.28 c -0.33,0.17 -0.8,0.25 -1.41,0.25 -0.61,0 -1.07,-0.13 -1.38,-0.39 -0.31,-0.26 -0.47,-0.64 -0.47,-1.14 v -10.23 c 0,-0.5 0.22,-0.89 0.65,-1.18 0.43,-0.29 1.28,-0.43 2.52,-0.43 1.24,0 2.49,0.24 3.73,0.72 v -4.42 c -1.18,-0.39 -2.64,-0.59 -4.39,-0.59 -2.32,0 -4.11,0.48 -5.36,1.45 -1.25,0.96 -1.88,2.26 -1.88,3.9 z m -8.04,5.07 h 4.73 v -21.55 h -4.73 z m -9.18,-15.61 -2.15,-5.94 h -5.04 l 4.6,10.82 -4.6,10.73 h 5.07 l 2.11,-5.88 1.99,5.88 h 5.07 l -4.63,-10.73 4.63,-10.82 h -5.04 z m -20.13,15.61 h 10.92 v -4.04 h -6.25 v -4.85 h 5.41 v -4.04 h -5.41 v -4.57 h 6.25 v -4.04 H 81.37 Z m -11.96,0 h 10.48 v -3.92 h -5.75 v -17.63 h -4.73 z m -14.66,0 h 4.7 v -6.22 h 2.33 c 1.68,0 3,-0.4 3.96,-1.21 0.96,-0.81 1.45,-2 1.45,-3.58 v -5.75 c 0,-1.57 -0.48,-2.77 -1.45,-3.58 -0.96,-0.81 -2.29,-1.21 -3.96,-1.21 h -7.03 z m 7.78,-11.57 c 0,0.87 -0.45,1.31 -1.34,1.31 h -1.74 v -7.25 h 1.74 c 0.89,0 1.34,0.43 1.34,1.31 z"  class="st5"  style="fill:#afca0b" />      </g>      <g  id="g73"  clip-path="url(#SVGID_8_)"  class="st4">      <defs  id="defs59" />       <clipPath  id="SVGID_12_">       <use  id="use61"  style="overflow:visible"  xlink:href="#SVGID_11_"  x="0"  y="0"  width="100%"  height="100%" />       </clipPath>              <radialGradient  gradientUnits="userSpaceOnUse"  gradientTransform="matrix(32.166,0,0,-32.166,1223.5194,8516.6758)"  r="0.68699998"  cy="260.28519"  cx="-34.4804"  id="SVGID_13_">       <stop  id="stop64"  style="stop-color:#AFCA0B"  offset="0" />        <stop  id="stop66"  style="stop-color:#AFCA0B"  offset="9.340660e-04" />        <stop  id="stop68"  style="stop-color:#95C11F"  offset="1" />       </radialGradient>       <rect  id="rect71"  clip-path="url(#SVGID_12_)"  height="12.7"  width="120"  class="st6"  y="131.37"  x="54.75"  style="fill:url(#SVGID_13_)" />      </g>     </g>    </g>  <g  id="g112"  transform="matrix(0.26458333,0,0,0.26458333,2.7061703,251.01424)">   <g  id="g110">    <g  id="g108">     <defs  id="defs101" />      <clipPath  id="SVGID_18_">      <use  height="100%"  width="100%"  y="0"  x="0"  xlink:href="#SVGID_17_"  style="overflow:visible"  id="use103" />      </clipPath>      <path  style="fill:#afca11"  class="st9"  d="m 178.26,124.27 h 0.33 c 0.18,0 0.3,0.03 0.37,0.08 0.07,0.05 0.11,0.17 0.11,0.36 0,0.19 -0.04,0.32 -0.13,0.39 -0.08,0.07 -0.23,0.1 -0.43,0.1 h -0.26 v -0.93 z m -0.38,2.21 h 0.38 v -0.96 h 0.29 c 0.07,0 0.13,0 0.16,-0.01 l 0.39,0.97 h 0.42 l -0.47,-1.05 c 0.24,-0.12 0.35,-0.36 0.35,-0.73 0,-0.51 -0.29,-0.77 -0.86,-0.77 h -0.69 v 2.55 z m -0.51,-2.61 c 0.19,-0.24 0.6,-0.36 1.22,-0.36 0.62,0 1.03,0.12 1.23,0.36 0.2,0.24 0.3,0.69 0.3,1.35 0,0.66 -0.1,1.1 -0.29,1.34 -0.2,0.24 -0.61,0.35 -1.23,0.35 -0.63,0 -1.03,-0.12 -1.22,-0.35 -0.19,-0.24 -0.28,-0.68 -0.28,-1.34 -0.02,-0.66 0.07,-1.11 0.27,-1.35 m -0.28,2.91 c 0.28,0.32 0.78,0.47 1.51,0.47 0.73,0 1.23,-0.16 1.51,-0.48 0.28,-0.32 0.41,-0.84 0.41,-1.56 0,-0.72 -0.14,-1.24 -0.42,-1.57 -0.28,-0.32 -0.78,-0.49 -1.5,-0.49 -0.72,0 -1.22,0.16 -1.5,0.49 -0.28,0.33 -0.42,0.85 -0.42,1.57 0,0.72 0.13,1.26 0.41,1.57"  clip-path="url(#SVGID_18_)"  id="path106" />     </g>    </g>   </g>  <g  id="g306"  transform="matrix(0.20975229,0,0,0.20975229,-0.91464975,280.66829)">  <path  id="path302"  d="M 75.97,50.42 C 73.55,43.59 66.92,32.31 58.25,23.24 49.53,14.05 36.85,3.55 28,3.88 21.38,4.14 17.63,8.63 14.27,15.22 c -0.31,0.84 0.08,1.56 1.43,1.56 h 22.08 c 0,0 1.64,-0.03 2.52,0.83 3.21,3.17 5.31,6.22 6.91,9.82 0.71,1.58 -0.09,2.72 -2.26,2.72 -3.99,0 -7.88,0.01 -9.62,0 -1.07,0 -1.86,0.94 -1.86,1.99 0,0.01 0,0.01 0,0.02 l -0.03,26.78 c 0,0 0.04,1.21 -1.49,1.94 -3.01,1.44 -7.64,2.75 -11.97,3.21 0,0 -1.34,0.26 -1.34,-1.42 V 32.11 c 0,0 0,0 0,0 0,-1.08 -0.84,-1.96 -1.91,-1.96 H 9.7 c 0,0 0,0 0,0 -0.96,0 -1.49,0.52 -1.79,1.29 -2.42,8.8 -3.67,18.31 -3.54,24.21 0.19,8.06 1.14,13.52 4.77,18.08 3.44,4.31 14.16,4.85 24.53,3.43 C 50.33,74.96 59.35,71.1 67.58,67 79.29,61.34 78.39,57.25 75.97,50.42"  class="st0"  style="fill:#ffffff" />   <path  id="path304"  d="m 67.57,66.99 c 2.47,-1.19 4.35,-2.31 5.8,-3.4 C 65.82,48.49 51.13,37.35 33.48,34.27 l -0.03,24.66 c 0,0 0.04,1.21 -1.49,1.94 -3.01,1.44 -7.64,2.75 -11.97,3.21 0,0 -1.34,0.26 -1.34,-1.42 V 33.62 c -4.09,0.35 -8.05,1.11 -11.84,2.27 -1.69,7.43 -2.55,14.85 -2.44,19.76 0.19,8.06 1.14,13.52 4.77,18.08 3.44,4.31 14.16,4.85 24.53,3.43 16.64,-2.21 25.66,-6.06 33.9,-10.17"  class="st1"  style="fill:#fff9d1" />  </g>  </g>  </g>  <style  type="text/css"  id="style10">  .st0{fill:#FFFFFF;}  .st1{clip-path:url(#SVGID_2_);}  .st2{clip-path:url(#SVGID_4_);}  .st3{clip-path:url(#SVGID_6_);fill:#647A84;}  .st4{clip-path:url(#SVGID_8_);}  .st5{clip-path:url(#SVGID_10_);fill:#AFCA0B;}  .st6{clip-path:url(#SVGID_12_);fill:url(#SVGID_13_);}  .st7{clip-path:url(#SVGID_2_);fill:#FFDE14;}  .st8{clip-path:url(#SVGID_15_);fill:url(#SVGID_16_);}  .st9{clip-path:url(#SVGID_18_);fill:#AFCA11;} </style>  <style  type="text/css"  id="style300">  .st0{fill:#FFFFFF;}  .st1{fill:#FFF9D1;} </style> </svg> 
</div>

<div id="clickCabinetPreviewDiv" name="inleyPreviewDiv"></div>

<br><br>

<div style="width: 600px">
	<div id="guiElements" style="display: flex; flex-flow: column; ">
		<div style="background-color: aliceblue;height: fit-content;clear: both; width: 100%;display: table;">
			<div style='font-weight: bold; margin-left: 15px; margin-bottom: 8px;'>Vitrine LxBxH Außenmaße</div>

			<div style="display: flex; flex-flow: column">
				<div style="display: flex; flex-flow: row;">
					<div style="flex-basis: 100px; justify-content: right; display: flex; margin-right: 8px">L: </div>
					<input type="number" min="50" max="1000" id="cabinetLength" name="cabinetLength" onchange="cabinetLengthChanged()" style="width: 60px">
					<span style="margin-left: 8px">mm</span>
					<div id="cabinetLengthErrorMsg" style="margin-left: 10px; color: #ff0000"></div>
				</div>
				<div style="display: flex; flex-flow: row;">
					<div style="flex-basis: 100px; justify-content: right; display: flex; margin-right: 8px">B: </div>
					<input type="number" min="50" max="1000" id="cabinetWidth"  name="cabinetWidth"  onchange="cabinetWidthChanged()"  style="width: 60px">
					<span style="margin-left: 8px">mm</span>
					<div id="cabinetWidthErrorMsg" style="margin-left: 10px; color: #ff0000"></div>
				</div>
				<div style="display: flex; flex-flow: row;">
					<div style="flex-basis: 100px; justify-content: right; display: flex; margin-right: 8px">H: </div>
					<input type="number" min="50" max="1000" id="cabinetHeight" name="cabinetHeight" onchange="cabinetHeightChanged()" style="width: 60px">
					<span style="margin-left: 8px">mm</span>
					<div id="cabinetHeightErrorMsg" style="margin-left: 10px; color: #ff0000"></div>
				</div>
				<div style="display: flex; flex-flow: row;">
					<div style="flex-basis: 100px; justify-content: right; display: flex; margin-right: 8px">Mit Boden: </div>
					<input type="checkbox" id="processAlsoFloor" name="processAlsoFloor" onchange="processAlsoFloorChanged()" style="display: flex; justify-content: left; margin-left: 0px">
				</div>
				<div style="display: flex; flex-flow: row;">
					<div style="flex-basis: 100px; justify-content: right; display: flex; margin-right: 8px">Hilfslinien: </div>
					<input type="checkbox" id="helperLines" name="helperLines" onchange="helperLinesChanged()" style="display: flex; justify-content: left; margin-left: 0px">
				</div>
				<div style="display: flex; flex-flow: row;">
					<div style="flex-basis: 100px; justify-content: right; display: flex; margin-right: 8px ">Materialdicke: </div>
					<div style="display: flex; justify-content: left; margin-left: 0px; flex-flow: column">
						<div style="display: flex; justify-content: left; margin-left: 0px">
							<input type="radio" id="ratio1dot5mm" name="materialThicknessRadio" value="1.5" checked onchange="materialThicknessChanged()" style="margin-left: 0px; display: flex">
							<span style="margin-left: 8px">1.5 mm</span>
						</div>
						<div style="display: flex; justify-content: left; margin-left: 0px">
							<input type="radio" id="ratio2mm" name="materialThicknessRadio" value="2" onchange="materialThicknessChanged()" style="margin-left: 0px; display: flex">
							<span style="margin-left: 8px">2 mm</span>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="exportButtons" style="background-color: cornsilk; display:flex; padding-top:10px; padding-bottom:10px; justify-content : space-around">
			<button id="downloadDXF" onclick="downloadDXF()" style="display: flex; flex-grow: 1; margin-left: 5px; margin-right: 5px" title="Generiere und download eine DXF Datei"> DXF Download</button>
			<button id="downloadSVG" onclick="downloadSVG()" style="display: flex; flex-grow: 1; margin-left: 5px; margin-right: 5px" title="Generiere und download eine SVG Datei"> SVG Download</button>
		</div>

		<div id="debugInfosOuter" style="background-color: cadetblue; display: flex">
			<div style="padding: 15px;" id="debugInfosInner"></div>
		</div>
	</div>
</div>
<script type="text/javascript">
var makerjs = require('makerjs');
var model;

var metadata = {
	//cabinetLength : 350,
	//cabinetWidth : 170,
	//cabinetHeight : 140,
	cabinetLength : 350,
	cabinetWidth : 140,
	cabinetHeight : 110,

	minSideLength : 50,
	maxSideLength : 1000,

	radius1 : 0.2,
	radius2 : 0.2,
	radius3 : 0.2,
	radius4 : 1.1,

	radiusInClickCornerLarge : 3.1,
	radiusInClickCornerSmall : 1.1,

	length1 : 0.9,
	length2 : 0.1,
	length3 : 0,

	clickElementLength : 30,
	borderElementLength : 10,

	processAlsoFloor : false,
	materialThickness : 1.5,

	helperLines : false,

	// calculated Values...
	cabinetLengthNumberOfElements : 0,
	cabinetWidthNumberOfElements : 0,
	cabinetHeightNumberOfElements : 0,

	cabinetLengthMmOfLongElement : 0,
	cabinetWidthMmOfLongElement : 0,
	cabinetHeightMmOfLongElement : 0,
	
	cabinetLengthStartEndElementLengthMm : 0,
	cabinetWidthStartEndElementLengthMm : 0,
	cabinetHeightStartEndElementLengthMm : 0,

	diffInnenAussen : 0,
	nettoDelta : 0,
	nettoDeltaHalf : 0,

	totalHeight : 0,
	totalWidth : 0,	
};

document.addEventListener("DOMContentLoaded", function() {
	createModel();
	drawPreview();
	document.getElementById('cabinetLength').focus();
});

function createModel() {

	calculateMetadata();

	model = {
	  paths: {
	  },
	  models: {
	  }
	};

	model.units = makerjs.unitType.Millimeter;

	createHelperLinesIfNeeded();

	fillDebugInfoArea();

	createFirstElement();

	createSecondElement();

	createThirdElement();
}

function createFirstElement() {
	model.models["heightLeftFirstElement"] = makerjs.importer.fromSVGPathData(createHeight(5 + metadata.diffInnenAussen, 5 + metadata.radiusInClickCornerSmall - metadata.totalHeight, true));
	model.models["heightRightFirstElement"] = makerjs.importer.fromSVGPathData(createHeight(5 + metadata.cabinetWidth, 5 + metadata.radiusInClickCornerSmall - metadata.totalHeight, false));

	model.models["widthLowerFirstElement"] = makerjs.importer.fromSVGPathData(createWidth(5 + metadata.diffInnenAussen + metadata.radiusInClickCornerSmall, metadata.cabinetHeight - metadata.totalHeight + 5 - metadata.diffInnenAussen, true, false));



	model.models["radius1FirstElement"] = makerjs.importer.fromSVGPathData(createRadiusLeftUpperSvgPath(5 + metadata.diffInnenAussen, 5 + metadata.radiusInClickCornerSmall - metadata.totalHeight + (metadata.processAlsoFloor ? metadata.diffInnenAussen : 0), metadata.radiusInClickCornerSmall));
	model.models["radius2FirstElement"] = makerjs.importer.fromSVGPathData(createRadiusRightUpperSvgPath(5 + metadata.cabinetWidth - metadata.radiusInClickCornerSmall, 5 - metadata.totalHeight + (metadata.processAlsoFloor ? metadata.diffInnenAussen : 0), metadata.radiusInClickCornerSmall));
	model.models["radius3FirstElement"] = makerjs.importer.fromSVGPathData(createRadiusLeftLowerSvgPath(5 + metadata.diffInnenAussen, 5 + metadata.cabinetHeight - metadata.totalHeight - metadata.diffInnenAussen - metadata.radiusInClickCornerSmall, metadata.radiusInClickCornerSmall));
	model.models["radius4FirstElement"] = makerjs.importer.fromSVGPathData(createRadiusRightLowerSvgPath(5 + metadata.cabinetWidth, 5 - metadata.totalHeight + metadata.cabinetHeight - metadata.diffInnenAussen - metadata.radiusInClickCornerSmall, metadata.radiusInClickCornerSmall));

	if (!metadata.processAlsoFloor) {
		model.models["lineFirstElement"] = makerjs.importer.fromSVGPathData(createStartPos(5 + metadata.diffInnenAussen + metadata.radiusInClickCornerSmall, 5 + metadata.radiusInClickCornerSmall - metadata.totalHeight - metadata.radiusInClickCornerSmall) + createHorizontalSvgPath(metadata.cabinetWidth - metadata.diffInnenAussen - metadata.radiusInClickCornerSmall - metadata.radiusInClickCornerSmall));
	} else {
		model.models["widthHigherFirstElement"] = makerjs.importer.fromSVGPathData(createWidth(5 + metadata.diffInnenAussen + metadata.radiusInClickCornerSmall, -metadata.totalHeight + 5 + metadata.diffInnenAussen, false, false));
	}
}

function createSecondElement() {
	model.models["hightLeftSecondElement"] = makerjs.importer.fromSVGPathData(createHeight(5 + metadata.diffInnenAussen, 5 + metadata.radiusInClickCornerSmall - metadata.totalHeight + metadata.cabinetHeight + 5, true));
	model.models["hightRightSecondElement"] = makerjs.importer.fromSVGPathData(createHeight(5 + metadata.cabinetLength, 5 + metadata.radiusInClickCornerSmall - metadata.totalHeight + metadata.cabinetHeight + 5, false));

	model.models["widthLowerSecondElement"] = makerjs.importer.fromSVGPathData(createLength(5 + metadata.diffInnenAussen + metadata.radiusInClickCornerSmall, metadata.cabinetHeight + metadata.cabinetHeight + 5 - metadata.totalHeight + 5 - metadata.diffInnenAussen, true, false));

	model.models["radius1SecondElement"] = makerjs.importer.fromSVGPathData(createRadiusLeftUpperSvgPath(5 + metadata.diffInnenAussen, 5 + metadata.radiusInClickCornerSmall - metadata.totalHeight + metadata.cabinetHeight + 5 + (metadata.processAlsoFloor ? metadata.diffInnenAussen : 0), metadata.radiusInClickCornerSmall));
	model.models["radius2SecondElement"] = makerjs.importer.fromSVGPathData(createRadiusRightUpperSvgPath(5 + metadata.cabinetLength - metadata.radiusInClickCornerSmall, 5 - metadata.totalHeight + metadata.cabinetHeight + 5 + (metadata.processAlsoFloor ? metadata.diffInnenAussen : 0), metadata.radiusInClickCornerSmall));
	model.models["radius3SecondElement"] = makerjs.importer.fromSVGPathData(createRadiusLeftLowerSvgPath(5 + metadata.diffInnenAussen, 5 + metadata.cabinetHeight - metadata.totalHeight - metadata.diffInnenAussen - metadata.radiusInClickCornerSmall + metadata.cabinetHeight + 5, metadata.radiusInClickCornerSmall));
	model.models["radius4SecondElement"] = makerjs.importer.fromSVGPathData(createRadiusRightLowerSvgPath(5 + metadata.cabinetLength, 5 - metadata.totalHeight + metadata.cabinetHeight - metadata.diffInnenAussen - metadata.radiusInClickCornerSmall + metadata.cabinetHeight + 5, metadata.radiusInClickCornerSmall));

	if (!metadata.processAlsoFloor) {
		model.models["lineSecondElement"] = makerjs.importer.fromSVGPathData(createStartPos(5 + metadata.diffInnenAussen + metadata.radiusInClickCornerSmall, 5 + metadata.radiusInClickCornerSmall - metadata.totalHeight - metadata.radiusInClickCornerSmall + 5 + metadata.cabinetHeight) + createHorizontalSvgPath(metadata.cabinetLength - metadata.diffInnenAussen - metadata.radiusInClickCornerSmall - metadata.radiusInClickCornerSmall));
	} else {
		// TODO
	}
}

function createThirdElement() {
	model.models["lengthUpperThirdElement"] = makerjs.importer.fromSVGPathData(createLength(5 + metadata.radiusInClickCornerLarge, metadata.cabinetHeight + metadata.cabinetHeight + 5 + 5 - metadata.totalHeight + 5, false, true));
	model.models["lengthLowerThirdElement"] = makerjs.importer.fromSVGPathData(createLength(5 + metadata.radiusInClickCornerLarge, metadata.cabinetHeight + metadata.cabinetHeight + metadata.cabinetWidth + 5 + 5 - metadata.totalHeight + 5, true, true));

	model.models["widthLeftThirdElement"] = makerjs.importer.fromSVGPathData(createWidth(5, metadata.cabinetHeight + metadata.cabinetHeight + 5 + 5 + 5 + metadata.radiusInClickCornerLarge - metadata.totalHeight, true, true));
	model.models["widthRightThirdElement"] = makerjs.importer.fromSVGPathData(createWidth(5 + metadata.cabinetLength, metadata.cabinetHeight + metadata.cabinetHeight + 5 + 5 + 5 + metadata.radiusInClickCornerLarge - metadata.totalHeight, false, true));

	model.models["radius1ThirdElement"] = makerjs.importer.fromSVGPathData(createRadiusLeftUpperSvgPath(5, 5 + metadata.radiusInClickCornerLarge - metadata.totalHeight + metadata.cabinetHeight + metadata.cabinetHeight + 5 + 5, metadata.radiusInClickCornerLarge));
	model.models["radius2ThirdElement"] = makerjs.importer.fromSVGPathData(createRadiusRightUpperSvgPath(5 + metadata.cabinetLength - metadata.radiusInClickCornerLarge, 5 - metadata.totalHeight + metadata.cabinetHeight + metadata.cabinetHeight + 5 + 5, metadata.radiusInClickCornerLarge));
	model.models["radius3ThirdElement"] = makerjs.importer.fromSVGPathData(createRadiusLeftLowerSvgPath(5, 5 + metadata.cabinetHeight - metadata.totalHeight - metadata.radiusInClickCornerLarge + metadata.cabinetHeight + metadata.cabinetWidth + 5 + 5, metadata.radiusInClickCornerLarge));
	model.models["radius4ThirdElement"] = makerjs.importer.fromSVGPathData(createRadiusRightLowerSvgPath(5 + metadata.cabinetLength, 5 - metadata.totalHeight + metadata.cabinetHeight - metadata.radiusInClickCornerLarge + metadata.cabinetHeight + metadata.cabinetWidth + 5 + 5, metadata.radiusInClickCornerLarge));
}

function createWidth(startX, startY, flag, floor) {
	let currentPath = createStartPos(startX, startY);

	if (floor) {
		let firstLinePathLength = metadata.cabinetWidthStartEndElementLengthMm - metadata.radiusInClickCornerLarge - metadata.nettoDeltaHalf - 0.1;
		currentPath += createVerticalSvgPath(firstLinePathLength);
	} else {
		let firstLinePathLength = metadata.cabinetWidthStartEndElementLengthMm - metadata.radiusInClickCornerSmall - metadata.diffInnenAussen - metadata.nettoDeltaHalf + 0.1;
		currentPath += createHorizontalSvgPath(firstLinePathLength);
	}

	for (let i = 0; i < (metadata.cabinetWidthNumberOfElements - 2); i++) {
		let cabinetWidthMmOfLongElementLocal = metadata.cabinetWidthMmOfLongElement;
		if (((i+1) % 2) === 0) {
			if (floor) {
				if (flag) {
					currentPath += createLeftLeftSvgPath();
					cabinetWidthMmOfLongElementLocal -= 0.2;
				} else {
					currentPath += createRightRightSvgPath();
					cabinetWidthMmOfLongElementLocal -= 0.2;
				}
			} else {
				if (flag) {
					currentPath += createLowerUpSvgPath();
					cabinetWidthMmOfLongElementLocal += 0.2;
				} else {
					currentPath += createUpperDownSvgPath();
					cabinetWidthMmOfLongElementLocal += 0.2;
				}
			}
		} else {
			if (floor) {
				if (flag) {
					currentPath += createLeftRightSvgPath();
					cabinetWidthMmOfLongElementLocal += 0.2;
				} else {
					currentPath += createRightLeftSvgPath();
					cabinetWidthMmOfLongElementLocal += 0.2;
				}
			} else {
				if (flag) {
					currentPath += createLowerDownSvgPath();
					cabinetWidthMmOfLongElementLocal -= 0.2;
				} else {
					currentPath += createUpperUpSvgPath();
					cabinetWidthMmOfLongElementLocal -= 0.2;
				}
			}
		}

		if (floor) {
			currentPath += createVerticalSvgPath(cabinetWidthMmOfLongElementLocal);
		} else {
			currentPath += createHorizontalSvgPath(cabinetWidthMmOfLongElementLocal);
		}
	}

	if (floor) {
		if (flag) {
			currentPath += createLeftLeftSvgPath();
		} else {
			currentPath += createRightRightSvgPath();
		}
	} else {
		if (flag) {
			currentPath += createLowerUpSvgPath();
		} else {
			currentPath += createUpperDownSvgPath();
		}
	}

	if (floor) {
		let lastLinePathLength = metadata.cabinetWidthStartEndElementLengthMm - metadata.radiusInClickCornerLarge - metadata.nettoDeltaHalf - 0.1;
		currentPath += createVerticalSvgPath(lastLinePathLength);
	} else {
		let lastLinePathLength = metadata.cabinetWidthStartEndElementLengthMm - metadata.radiusInClickCornerSmall - metadata.nettoDeltaHalf + 0.1;
		currentPath += createHorizontalSvgPath(lastLinePathLength);
	}
	return currentPath;
}

function createLength(startX, startY, flag, floor) {
	let currentPath = createStartPos(startX, startY);

	if (floor) {
		let firstLinePathLength = metadata.cabinetLengthStartEndElementLengthMm - metadata.nettoDeltaHalf - metadata.radiusInClickCornerLarge - 0.1;
		currentPath += createHorizontalSvgPath(firstLinePathLength);
	} else {
		let firstLinePathLength = metadata.cabinetLengthStartEndElementLengthMm - metadata.nettoDeltaHalf - metadata.diffInnenAussen - metadata.radiusInClickCornerSmall + 0.1;
		currentPath += createHorizontalSvgPath(firstLinePathLength);
	}


	for (let i = 0; i < (metadata.cabinetLengthNumberOfElements - 2); i++) {
		let cabinetLengthMmOfLongElementLocal = metadata.cabinetLengthMmOfLongElement;
		if (((i+1) % 2) === 0) {
			if (floor) {
				if (flag) {
					currentPath += createLowerDownSvgPath();
					cabinetLengthMmOfLongElementLocal -= 0.2;
				} else {
					currentPath += createUpperUpSvgPath();
					cabinetLengthMmOfLongElementLocal -= 0.2;
				}
			} else {
				if (flag) {
					currentPath += createLowerUpSvgPath();
					cabinetLengthMmOfLongElementLocal += 0.2;
				} else {
					alert("Alarm!");
				}
			}
		} else {
			if (floor) {
				if (flag) {
					currentPath += createLowerUpSvgPath();
					cabinetLengthMmOfLongElementLocal += 0.2;
				} else {
					currentPath += createUpperDownSvgPath();
					cabinetLengthMmOfLongElementLocal += 0.2;
				}
			} else {
				if (flag) {
					currentPath += createLowerDownSvgPath();
					cabinetLengthMmOfLongElementLocal -= 0.2;
				} else {
					alert("Alarm!");
				}
			}
		}
		currentPath += createHorizontalSvgPath(cabinetLengthMmOfLongElementLocal);
	}

	if (floor) {
		if (flag) {
			currentPath += createLowerDownSvgPath()
		} else {
			currentPath += createUpperUpSvgPath();
		}
	} else {
		if (flag) {
			currentPath += createLowerUpSvgPath()
		} else {
			alert("Alarm!");
		}
	}
	
	if (floor) {
		let lastLinePathLength = metadata.cabinetLengthStartEndElementLengthMm - metadata.nettoDeltaHalf - metadata.radiusInClickCornerLarge - 0.1;
		currentPath += createHorizontalSvgPath(lastLinePathLength);
	} else {
		let lastLinePathLength = metadata.cabinetLengthStartEndElementLengthMm - metadata.nettoDeltaHalf - metadata.radiusInClickCornerSmall + 0.1;
		currentPath += createHorizontalSvgPath(lastLinePathLength);
	}

	return currentPath;
}

function createHeight(startX, startY, left) {
	if (metadata.processAlsoFloor) {
		startY += metadata.diffInnenAussen;
	}

	let currentPath = createStartPos(startX, startY);

	if (left) {
		let firstLinePathLength = metadata.cabinetHeightStartEndElementLengthMm - metadata.nettoDeltaHalf - metadata.radiusInClickCornerSmall + 0.1;
		if (metadata.processAlsoFloor) {
			firstLinePathLength -= metadata.diffInnenAussen;
		}
		currentPath += createVerticalSvgPath(firstLinePathLength);
	} else {
		let firstLinePathLength = metadata.cabinetHeightStartEndElementLengthMm - metadata.nettoDeltaHalf - metadata.radiusInClickCornerSmall - 0.1;
		if (metadata.processAlsoFloor) {
			firstLinePathLength -= metadata.diffInnenAussen;
		}
		currentPath += createVerticalSvgPath(firstLinePathLength);
	}

	for (let i = 0; i < (metadata.cabinetHeightNumberOfElements - 2); i++) {
		let cabinetHeightMmOfLongElementLocal = metadata.cabinetHeightMmOfLongElement;
		if (((i+1) % 2) === 0) {
			if (left) {
				currentPath += createLeftRightSvgPath();
				cabinetHeightMmOfLongElementLocal += 0.2;
			} else {
				currentPath += createRightRightSvgPath();
				cabinetHeightMmOfLongElementLocal -= 0.2;
			}
		} else {
			if (left) {
				currentPath += createLeftLeftSvgPath();
				cabinetHeightMmOfLongElementLocal -= 0.2;
			} else {
				currentPath += createRightLeftSvgPath();
				cabinetHeightMmOfLongElementLocal += 0.2;
			}
		}
		currentPath += createVerticalSvgPath(cabinetHeightMmOfLongElementLocal);
	}

	if (left) {
		currentPath += createLeftRightSvgPath()
	} else {
		currentPath += createRightRightSvgPath();
	}
	if (left) {
		let lastLinePathLength = metadata.cabinetHeightStartEndElementLengthMm - metadata.nettoDeltaHalf - metadata.radiusInClickCornerSmall - metadata.diffInnenAussen + 0.1;
		currentPath += createVerticalSvgPath(lastLinePathLength);
	} else {
		let lastLinePathLength = metadata.cabinetHeightStartEndElementLengthMm - metadata.nettoDeltaHalf - metadata.radiusInClickCornerSmall - metadata.diffInnenAussen - 0.1;
		currentPath += createVerticalSvgPath(lastLinePathLength);
	}
	return currentPath;
}

function createHelperLinesIfNeeded() {
	if (metadata.helperLines) {
		createRectangle("side1", metadata.cabinetWidth, metadata.cabinetHeight, 5, metadata.cabinetHeight + metadata.cabinetWidth + 15);
		createRectangle("side2", metadata.cabinetLength, metadata.cabinetHeight, 5, metadata.cabinetWidth + 10);
		createRectangle("top", metadata.cabinetLength, metadata.cabinetWidth, 5, 5);
	}
}

function fillDebugInfoArea() {
	document.getElementById('debugInfosInner').innerHTML =
			"Debug Infos:<br><pre>" + "metaData: \n" + JSON.stringify(metadata, null, 2) + "\n\n" +
			"</pre>";
}

function createRectangle(deterministicName, width, height, startx, starty) {
	model.paths[deterministicName + "_1"] = new makerjs.paths.Line([startx, starty], [startx + width, starty]);
	model.paths[deterministicName + "_2"] = new makerjs.paths.Line([startx, starty + height], [startx + width, starty + height]);
	model.paths[deterministicName + "_3"] = new makerjs.paths.Line([startx, starty], [startx, starty + height]);
	model.paths[deterministicName + "_4"] = new makerjs.paths.Line([startx + width, starty], [startx + width, starty + height]);
}

function calculateMetadata() {
	metadata.nettoDelta = metadata.radius4 - metadata.radius3 - metadata.length2 -  metadata.radius2 + metadata.radius1;
	metadata.nettoDeltaHalf = metadata.nettoDelta / 2; 
	metadata.diffInnenAussen = metadata.radius1 + metadata.length1 + metadata.radius2 + metadata.radius3 + metadata.length3 + metadata.radius4;

	metadata.totalHeight = metadata.cabinetHeight + metadata.cabinetHeight + metadata.cabinetWidth + 20;
	metadata.totalWidth = Math.max(metadata.cabinetWidth, metadata.cabinetLength) + 10;
	
	metadata.cabinetLengthNumberOfElements = determineNoOfElementsIncludingTheHalf(metadata.cabinetLength);
	metadata.cabinetWidthNumberOfElements  = determineNoOfElementsIncludingTheHalf(metadata.cabinetWidth);
	metadata.cabinetHeightNumberOfElements = determineNoOfElementsIncludingTheHalf(metadata.cabinetHeight);

	metadata.cabinetLengthMmOfLongElement = (metadata.cabinetLength / (metadata.cabinetLengthNumberOfElements - 1)) - metadata.nettoDelta;
	metadata.cabinetWidthMmOfLongElement  = (metadata.cabinetWidth  / (metadata.cabinetWidthNumberOfElements  - 1)) - metadata.nettoDelta;
	metadata.cabinetHeightMmOfLongElement = (metadata.cabinetHeight / (metadata.cabinetHeightNumberOfElements - 1)) - metadata.nettoDelta;

	metadata.cabinetLengthStartEndElementLengthMm = ((metadata.cabinetLength / (metadata.cabinetLengthNumberOfElements - 1)) / 2);
	metadata.cabinetWidthStartEndElementLengthMm  = ((metadata.cabinetWidth / (metadata.cabinetWidthNumberOfElements - 1)) / 2);
	metadata.cabinetHeightStartEndElementLengthMm = ((metadata.cabinetHeight / (metadata.cabinetHeightNumberOfElements - 1)) / 2);
}

function drawPreview() {
	var svg = makerjs.exporter.toSVG(model, {svgAttrs : {"width" : metadata.totalWidth + "px", "height" : metadata.totalHeight + "px", "id" : "preViewSvg" } });
		
	document.getElementById('clickCabinetPreviewDiv').innerHTML = "<div id='backgroundDiv'></div>";
	
	document.getElementById('backgroundDiv').innerHTML = "<div id='contentDiv'></div>";
	
	document.getElementById('contentDiv').innerHTML = svg;
	document.getElementById('contentDiv').style.position = "relative";

	let viewBoxAttrib = "-1 -1 " + (metadata.totalWidth + 2) + " " + (metadata.totalHeight + 2) ;
	document.getElementById('preViewSvg').setAttribute("viewBox", viewBoxAttrib);

	let g = document.querySelector('#preViewSvg>g');
	g.style="stroke-width:0.05mm";

	document.getElementById('downloadDXF').style.visibility = "";
	document.getElementById('downloadSVG').style.visibility = "";
	
	document.getElementById("cabinetWidth").value = metadata.cabinetWidth;
	document.getElementById("cabinetHeight").value = metadata.cabinetHeight;
	document.getElementById("cabinetLength").value = metadata.cabinetLength;
}

/**
 * @param edgeLengthInMM edge length in mm
 * @returns number of shackles
 * 				__----__                    == 3
 * 				__----____----__            == 5
 *				__----____----____----__    == 7
 */
function determineNoOfElementsIncludingTheHalf(edgeLengthInMM) {
	let numberOfElements = Math. trunc(edgeLengthInMM / 25);
	if ((numberOfElements % 2) === 1) {
		numberOfElements--;
	}
	let sizeOfElement = edgeLengthInMM / numberOfElements;
	if (sizeOfElement > 45) {
		numberOfElements += 2;
		//sizeOfElement = edgeLengthInMM / numberOfElements;
	}
	return numberOfElements + 1; // "split" the first half and the last half as calculated Elements
}

/*********************************************** SVG Path Elements BEGIN **********************************************/

function createHorizontalSvgPath(length) {
	return "h " + length + " ";
}

function createVerticalSvgPath(length) {
	return "v " + length + " ";
}

function createStartPos(x, y) {
	return "M " + x + " " + y + " ";
}

function createUpperUpSvgPath() {
	let upperUp = "";
	upperUp += "m xx1,xy1 ";
	upperUp += "a xr1 xr1 0 0 0  xr1 -xr1 ";
	upperUp += "v -xl1 ";
	upperUp += "a xr2 xr2 0 0 0 -xr2 -xr2 ";
	upperUp += "h -xl2 ";
	upperUp += "a xr3 xr3 0 0 1 -xr3 -xr3 ";
	upperUp += "v -xl3 ";
	upperUp += "a xr4 xr4 0 0 1  xr4 -xr4 ";
	return replaceValues(upperUp);
}

function createUpperDownSvgPath() {
	let upperDown = "";
	upperDown += "m xx1,xy1 ";
	upperDown += "a xr4 xr4 0 0 1 xr4 xr4 ";
	upperDown += "v xl3 ";
	upperDown += "a xr3 xr3 0 0 1 -xr3 xr3 ";
	upperDown += "h -xl2 ";
	upperDown += "a xr2 xr2 0 0 0 -xr2 xr2 ";
	upperDown += "v xl1 ";
	upperDown += "a xr1 xr1 0 0 0 xr1 xr1 ";
	return replaceValues(upperDown);
}

function createLowerDownSvgPath() {
	let lowerDown = "";
	lowerDown += "m xx1,xy1 ";
	lowerDown += "a xr1 xr1 0 0 1 xr1 xr1 ";
	lowerDown += "v xl1 ";
	lowerDown += "a xr2 xr2 0 0 1  -xr2 xr2 ";
	lowerDown += "h -xl2 ";
	lowerDown += "a xr3 xr3 0 0 0  -xr3 xr3 ";
	lowerDown += "v xl3 ";
	lowerDown += "a xr4 xr4 0 0 0 xr4 xr4 ";
	return replaceValues(lowerDown);
}

function createLowerUpSvgPath() {
	let lowerUp = "";
	lowerUp += "m xx1,xy1 ";
	lowerUp += "a xr4 xr4 0 0 0 xr4 -xr4 ";
	lowerUp += "v -xl3 ";
	lowerUp += "a xr3 xr3 0 0 0  -xr3 -xr3 ";
	lowerUp += "h -xl2 ";
	lowerUp += "a xr2 xr2 0 0 1  -xr2 -xr2 ";
	lowerUp += "v -xl1 ";
	lowerUp += "a xr1 xr1 0 0 1 xr1 -xr1 ";
	return replaceValues(lowerUp);
}

function createRightRightSvgPath() {
	let rightRight = "";
	rightRight += "m xx1,xy1 ";
	rightRight += "a xr1 xr1 0 0 0 xr1  xr1 ";
	rightRight += "h xl1 ";
	rightRight += "a xr2 xr2 0 0 0 xr2 -xr2 ";
	rightRight += "v -xl2 ";
	rightRight += "a xr3 xr3 0 0 1 xr3 -xr3 ";
	rightRight += "h xl3 ";
	rightRight += "a xr4 xr4 0 0 1 xr4  xr4 ";
	return replaceValues(rightRight);
}

function createRightLeftSvgPath() {
	let rightLeft = "";
	rightLeft += "m xx1,xy1 ";
	rightLeft += "a xr4 xr4 0 0 1 -xr4  xr4 ";
	rightLeft += "h -xl3 ";
	rightLeft += "a xr3 xr3 0 0 1 -xr3 -xr3 ";
	rightLeft += "v -xl2 ";
	rightLeft += "a xr2 xr2 0 0 0 -xr2 -xr2 ";
	rightLeft += "h -xl1 ";
	rightLeft += "a xr1 xr1 0 0 0 -xr1  xr1 ";
	return replaceValues(rightLeft);
}

function createLeftLeftSvgPath() {
	let leftLeft = "";
	leftLeft += "m xx1,xy1 ";
	leftLeft += "a xr1 xr1 0 0 1 -xr1 xr1 ";
	leftLeft += "h -xl1 ";
	leftLeft += "a xr2 xr2 0 0 1 -xr2  -xr2 ";
	leftLeft += "v -xl2 ";
	leftLeft += "a xr3 xr3 0 0 0 -xr3  -xr3 ";
	leftLeft += "h -xl3 ";
	leftLeft += "a xr4 xr4 0 0 0 -xr4 xr4 ";
	return replaceValues(leftLeft);
}

function createLeftRightSvgPath() {
	let leftRight = "";
	leftRight += "m xx1,xy1 ";
	leftRight += "a xr4 xr4 0 0 0 xr4 xr4 ";
	leftRight += "h xl3 ";
	leftRight += "a xr3 xr3 0 0 0 xr3  -xr3 ";
	leftRight += "v -xl2 ";
	leftRight += "a xr2 xr2 0 0 1 xr2 -xr2 ";
	leftRight += "h xl1 ";
	leftRight += "a xr1 xr1 0 0 1 xr1 xr1 ";
	return replaceValues(leftRight);
}

function createRadiusLeftUpperSvgPath(startX, startY, radius) {
	return createRadiusGenericSvgPath(startX, startY, radius, 1, "", "-");
}

function createRadiusRightUpperSvgPath(startX, startY, radius) {
	return createRadiusGenericSvgPath(startX, startY, radius, 1, "", "");
}

function createRadiusLeftLowerSvgPath(startX, startY, radius) {
	return createRadiusGenericSvgPath(startX, startY, radius, 0, "", "");
}

function createRadiusRightLowerSvgPath(startX, startY, radius) {
	return createRadiusGenericSvgPath(startX, startY, radius, 1, "-", "");
}

function createRadiusGenericSvgPath(startX, startY, radius, sf, xRadiusMinus, yRadiusMinus) {
	return "M " + startX + " " + startY + " a " + radius + " " + radius + " 0 0 " + sf + " " + xRadiusMinus + radius + " " + yRadiusMinus +radius + " ";
}

function replaceValues(input) {
	return input.replaceAll("xr1",  metadata.radius1)
			    .replaceAll("xr2",  metadata.radius2)
			    .replaceAll("xr3",  metadata.radius3)
			    .replaceAll("xr4",  metadata.radius4)
			    .replaceAll("xx1",  0)
			    .replaceAll("xy1",  0)
			    .replaceAll("xl1",  metadata.length1)
			    .replaceAll("xl2",  metadata.length2)
			    .replaceAll("xl3",  metadata.length3);
}

/*********************************************** SVG Path Elements END ************************************************/

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/*********************************************** GUI Event Handler BEGIN **********************************************/

function cabinetLengthChanged() {
	if (genericChanged("cabinetLength", "cabinetLength", checkNumberRange)) {
		createModel();
		drawPreview();
	}
}

function cabinetWidthChanged() {
	if (genericChanged("cabinetWidth", "cabinetWidth", checkNumberRange)) {
		createModel();
		drawPreview();
	}
}

function cabinetHeightChanged() {
	if (genericChanged("cabinetHeight", "cabinetHeight", checkNumberRange)) {
		createModel();
		drawPreview();
	}
}

function processAlsoFloorChanged() {
	let processAlsoFloor = document.getElementById("processAlsoFloor").checked;
	metadata["processAlsoFloor"] = processAlsoFloor;
	createModel();
	drawPreview();
}

function helperLinesChanged() {
	metadata["helperLines"] = document.getElementById("helperLines").checked;
	createModel();
	drawPreview();
}

function materialThicknessChanged() {
	let materialThickness = parseFloat(document.querySelector('input[name="materialThicknessRadio"]:checked').value);
	if (materialThickness !== 1.5) {
		materialThickness = 1.5;
		document.getElementById("ratio1dot5mm").checked = true;
		alert("Sorry daweil nur 1.5 mm unterstützt");
	}
	metadata["processAlsoFloor"] = materialThickness;
	createModel();
	drawPreview();
}

function genericChanged(elementId, metaDataFieldName, checkFkt) {
	var intValue = parseInt(document.getElementById(elementId).value);
	document.getElementById(elementId).value = intValue;
	let checkFktResult = true;
	if (checkFkt) {
		let checkFktReturn = checkFkt(intValue);
		checkFktResult = checkFktReturn.checkResult;
		if (!checkFktResult && document.getElementById(elementId + "ErrorMsg")) {
			document.getElementById(elementId + "ErrorMsg").innerHTML = checkFktReturn.errorMessage;
		}
	}
	if (!isNaN(intValue) && checkFktResult) {
		document.getElementById(elementId).style.backgroundColor = "";
		if (document.getElementById(elementId + "ErrorMsg")) {
			document.getElementById(elementId + "ErrorMsg").innerHTML = "";
		}
		metadata[metaDataFieldName] = intValue;
		return true;
	} else {
		document.getElementById(elementId).style.backgroundColor = "#d87979";
		return false;
	}
}

function checkNumberRange(toCheck) {
	let toCheckInt = parseInt(toCheck);

	if (isNaN(toCheckInt)) {
		return {
			checkResult: false,
			errorMessage: "natürliche Zahl zwischen " + metadata.minSideLength + " und " + metadata.maxSideLength + "."
		};
	}

	let checkResultBool = toCheckInt >= 50 && toCheckInt <= 1000;
	return {
		checkResult: checkResultBool,
		errorMessage: "natürliche Zahl zwischen " + metadata.minSideLength + " und " + metadata.maxSideLength + "."
	};
}

function download(data, filename, type) {
	var file = new Blob([data], {type: type});
	if (window.navigator.msSaveOrOpenBlob) // IE10+
		window.navigator.msSaveOrOpenBlob(file, filename);
	else { // Others
		var a = document.createElement("a"),
				url = URL.createObjectURL(file);
		a.href = url;
		a.download = filename;
		document.body.appendChild(a);
		a.click();
		setTimeout(function() {
			document.body.removeChild(a);
			window.URL.revokeObjectURL(url);
		}, 0);
	}
}

function downloadDXF() {
	let helperLines = metadata.helperLines;

	if (helperLines) {
		metadata.helperLines = false;
		createModel();
	}

	let dxfExp = makerjs.exporter.toDXF(model);
	download(dxfExp, getDateStringForFilename() + "_Click_Vitrine_" + metadata.cabinetLength + "x" + metadata.cabinetWidth + "x" + metadata.cabinetHeight + ".dxf", "dxf")

	if (helperLines) {
		metadata.helperLines = true;
		createModel();
		drawPreview();
	}
}

function downloadSVG() {
	let helperLines = metadata.helperLines;

	if (helperLines) {
		metadata.helperLines = false;
		createModel();
	}

	download(convertSVG(), getDateStringForFilename() + "_Click_Vitrine_" + metadata.cabinetLength + "x" + metadata.cabinetWidth + "x" + metadata.cabinetHeight + ".svg", "svg")

	if (helperLines) {
		metadata.helperLines = true;
		createModel();
		drawPreview();
	}
}

function convertSVG() {
	return '<?xml version="1.0" encoding="UTF-8"?>' +
			makerjs.exporter.toSVG(model, {
				units: makerjs.unitType.Millimeter,
				svgAttrs: {
					"width": (metadata.totalWidth + "mm"),
					"height": (metadata.totalHeight + "mm"),
					"xmlns": "http://www.w3.org/2000/svg",
					"xmlns:xlink": "http://www.w3.org/1999/xlink",
					"version": "1.1",
					"baseProfile": "full"
				}
			}) + "\n";
}

/*********************************************** GUI Event Handler END ************************************************/

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/*********************************************** Helper BEGIN *********************************************************/

function getDateStringForFilename() {
	let currentdate = new Date();
	return getYears(currentdate) + "-" + getMonths(currentdate) + "-" + getDays(currentdate);
}

function getYears(date) {
	return date.getFullYear();
}

function getMonths(date) {
	return (((date.getMonth()+1) < 10) ? "0" : "") + (date.getMonth()+1);
}

function getDays(date) {
	return ((date.getDate() < 10) ? "0" : "") + date.getDate();
}

/*********************************************** Helper END ***********************************************************/

</script>
</body>
</html>