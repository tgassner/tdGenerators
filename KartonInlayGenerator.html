<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Vitrinen-Fixxer Generator</title>
<script src="https://cdn.jsdelivr.net/npm/makerjs@0/target/js/browser.maker.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bezier-js@2/bezier.js"></script>
<script src="https://cdn.jsdelivr.net/npm/opentype.js@0/dist/opentype.js"></script>

<script type="text/javascript">
	var makerjs = require('makerjs');
</script>
</head>
<body>
<h1>Karton Inlay Generator</h1>

<div id="logodiv" style="background: linear-gradient(to left, #ffcd00, #ffcd14 , #ffcd00);width:fit-content; right:0px;position:absolute;top:0px;padding:20px;background-image: url('data:image/svg+xml;charset=UTF-8,')">
	<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg  xmlns:dc="http://purl.org/dc/elements/1.1/"  xmlns:cc="http://creativecommons.org/ns#"  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"  xmlns:svg="http://www.w3.org/2000/svg"  xmlns="http://www.w3.org/2000/svg"  xmlns:xlink="http://www.w3.org/1999/xlink"  id="svg8"  version="1.1"  viewBox="0 0 50.469002 15.519"  height="15.519mm"  width="50.469002mm">  <defs  id="defs2">  <rect  id="SVGID_1_"  x="22.370001"  y="29.84"  width="181.41"  height="181.41" />  <rect  id="SVGID_3_"  x="54.110001"  y="146.83"  width="120.25"  height="24.34" />  <rect  id="SVGID_5_"  x="54.110001"  y="146.83"  width="120.25"  height="24.34" />  <rect  id="SVGID_7_"  x="54.110001"  y="121.56"  width="121.28"  height="23.139999" />  <rect  id="SVGID_9_"  x="54.110001"  y="121.56"  width="121.28"  height="23.139999" />  <path  id="SVGID_11_"  d="m 168.62,135.89 c 0.54,0.29 0.91,0.55 1.1,0.79 0.2,0.24 0.3,0.6 0.3,1.07 v 0.47 c 0,1.02 -0.89,1.52 -2.67,1.52 -1.78,0 -3.38,-0.3 -4.79,-0.9 v 4.51 c 1.14,0.48 2.83,0.71 5.08,0.71 2.25,0 4,-0.45 5.24,-1.35 1.24,-0.9 1.87,-2.19 1.87,-3.87 v -1.93 c 0,-0.11 -0.03,-0.21 -0.04,-0.31 -2.3,-0.47 -4.7,-0.91 -7.21,-1.32 z m -113.87,0.43 v 7.59 h 4.7 v -6.22 h 2.33 c 1.68,0 3,-0.4 3.96,-1.21 0.65,-0.54 1.06,-1.28 1.27,-2.17 -4.34,0.59 -8.44,1.26 -12.26,2.01 M 69.41,134 v 9.91 h 10.48 v -3.92 h -5.75 v -6.56 c -1.61,0.18 -3.18,0.37 -4.73,0.57 m 76.16,9.91 h 4.45 l 0.84,-4.97 h 4.26 l 0.9,4.97 h 4.45 l -1.92,-9.92 c -1.44,-0.18 -2.9,-0.36 -4.39,-0.52 l 0.27,1.52 h -2.92 l 0.3,-1.77 c -1.34,-0.14 -2.7,-0.27 -4.07,-0.39 z m -64.2,-11.18 v 11.18 h 10.92 v -4.04 h -6.25 v -4.85 h 5.41 V 132 c -3.45,0.2 -6.81,0.44 -10.08,0.73 m 52.82,11.18 h 10.48 v -3.92 h -5.75 v -7.84 c -1.56,-0.1 -3.13,-0.19 -4.73,-0.27 z m -35.91,-12.23 0.64,1.5 -4.6,10.73 h 5.07 l 2.11,-5.88 1.99,5.88 h 5.07 l -4.63,-10.73 0.73,-1.71 c -2.15,0.05 -4.28,0.13 -6.38,0.21 m 20.44,7.16 c 0,1.66 0.58,2.94 1.73,3.86 1.15,0.91 2.84,1.37 5.05,1.37 2.21,0 4.14,-0.43 5.75,-1.31 v -10.42 h -4.54 v 7.28 c -0.33,0.17 -0.8,0.25 -1.42,0.25 -0.61,0 -1.07,-0.13 -1.38,-0.39 -0.31,-0.26 -0.47,-0.64 -0.47,-1.13 v -6.87 c -1.56,-0.04 -3.14,-0.06 -4.73,-0.08 v 7.44 z m -8.04,-7.45 v 12.52 h 4.73 v -12.53 c -0.47,0 -0.93,-0.01 -1.4,-0.01 -1.12,0 -2.22,0.01 -3.33,0.02" />  <rect  id="SVGID_17_"  x="170.49001"  y="118.36"  width="16.209999"  height="9.5900002" />  <clipPath  id="SVGID_2_">    <use  height="100%"  width="100%"  y="0"  x="0"  xlink:href="#SVGID_1_"  style="overflow:visible"  id="use19" />    </clipPath>  </defs>  <metadata  id="metadata5">  <rdf:RDF>  <cc:Work  rdf:about="">  <dc:format>image/svg+xml</dc:format>  <dc:type  rdf:resource="http://purl.org/dc/dcmitype/StillImage" />  <dc:title></dc:title>  </cc:Work>  </rdf:RDF>  </metadata>  <g  transform="translate(0,-281.481)"  id="layer1">  <g  id="g358">  <g  style="fill:#fff9d1"  id="g40"  clip-path="url(#SVGID_2_)"  class="st1"  transform="matrix(0.26458333,0,0,0.26458333,2.7061703,251.01424)">    <g  id="g38">     <defs  id="defs23" />      <clipPath  id="SVGID_4_">      <use  id="use25"  style="overflow:visible"  xlink:href="#SVGID_3_"  x="0"  y="0"  width="100%"  height="100%" />      </clipPath>      <g  id="g36"  clip-path="url(#SVGID_4_)"  class="st2">      <defs  id="defs29" />       <clipPath  id="SVGID_6_">       <use  id="use31"  style="overflow:visible"  xlink:href="#SVGID_5_"  x="0"  y="0"  width="100%"  height="100%" />       </clipPath>       <path  id="path34"  clip-path="url(#SVGID_6_)"  d="m 163.69,151.53 c -0.88,0 -1.9,0.25 -3.08,0.74 v -0.68 h -1.79 v 14.98 h 1.87 v -12.61 c 0.96,-0.46 1.86,-0.68 2.68,-0.68 1.3,0 1.95,0.64 1.95,1.92 v 11.37 h 1.87 V 155.2 c 0,-0.44 -0.04,-0.79 -0.13,-1.05 0.95,-0.58 1.9,-0.87 2.84,-0.87 1.28,0 1.92,0.64 1.92,1.92 v 11.37 h 1.9 V 155 c 0,-1.11 -0.32,-1.96 -0.95,-2.57 -0.63,-0.61 -1.55,-0.91 -2.74,-0.91 -1.19,0 -2.4,0.36 -3.61,1.08 -0.63,-0.71 -1.54,-1.07 -2.73,-1.07 m -8.56,0.1 c -0.18,0.05 -0.31,0.09 -0.41,0.12 -0.1,0.03 -0.24,0.09 -0.42,0.2 -0.18,0.11 -0.3,0.17 -0.34,0.2 -0.04,0.03 -0.18,0.12 -0.4,0.28 -0.22,0.16 -0.36,0.25 -0.41,0.29 v -1.13 h -1.79 v 14.98 h 1.87 V 154.5 c 0.53,-0.37 0.87,-0.61 1.03,-0.71 0.51,-0.33 1.08,-0.5 1.71,-0.5 h 0.9 v -1.79 h -0.66 c -0.46,0 -0.82,0.05 -1.08,0.13 m -15.66,11.11 c 0,1.25 0.35,2.24 1.05,2.97 0.7,0.74 1.77,1.11 3.21,1.11 1.44,0 2.51,-0.37 3.21,-1.11 0.7,-0.74 1.05,-1.73 1.05,-2.97 v -7.35 c 0,-1.25 -0.35,-2.24 -1.05,-2.97 -0.7,-0.74 -1.77,-1.11 -3.21,-1.11 -1.44,0 -2.51,0.37 -3.21,1.11 -0.7,0.74 -1.05,1.73 -1.05,2.97 z m 6.68,-0.02 c 0,1.65 -0.81,2.47 -2.42,2.47 -1.62,0 -2.42,-0.82 -2.42,-2.47 v -7.29 c 0,-1.63 0.81,-2.45 2.42,-2.45 1.61,0 2.42,0.82 2.42,2.45 z m -16.19,3.84 h 1.87 v -7.71 h 5.29 v -1.69 h -5.29 v -6.63 h 5.58 v -1.66 h -7.45 z m -8.66,-14.93 c -0.18,0.05 -0.31,0.09 -0.41,0.12 -0.1,0.03 -0.24,0.09 -0.42,0.2 -0.18,0.11 -0.3,0.17 -0.34,0.2 -0.04,0.03 -0.18,0.12 -0.4,0.28 -0.22,0.16 -0.36,0.25 -0.41,0.29 v -1.13 h -1.79 v 14.98 h 1.87 V 154.5 c 0.53,-0.37 0.87,-0.61 1.03,-0.71 0.51,-0.33 1.08,-0.5 1.71,-0.5 h 0.9 v -1.79 h -0.66 c -0.45,0 -0.81,0.05 -1.08,0.13 m -13.66,3.79 c 0,-1.65 0.82,-2.47 2.45,-2.47 1.63,0 2.45,0.83 2.45,2.47 v 3.03 h -4.9 z m 3.11,11.27 c 1.21,0 2.25,-0.14 3.13,-0.42 v -1.74 c -1.11,0.32 -2.18,0.47 -3.21,0.47 -1.04,0 -1.8,-0.19 -2.29,-0.58 -0.49,-0.39 -0.74,-0.97 -0.74,-1.76 V 160 h 6.69 v -4.58 c 0,-1.25 -0.35,-2.24 -1.04,-2.99 -0.69,-0.75 -1.76,-1.12 -3.2,-1.12 -1.44,0 -2.51,0.37 -3.22,1.12 -0.71,0.75 -1.07,1.74 -1.07,2.99 v 7.32 c 0,2.64 1.65,3.95 4.95,3.95 m -10.19,-15.11 h -2.47 c -1.23,0 -2.21,0.35 -2.95,1.04 -0.74,0.69 -1.11,1.66 -1.11,2.91 v 7.34 c 0,1.21 0.31,2.14 0.94,2.79 0.62,0.65 1.52,0.97 2.7,0.97 1.18,0 2.16,-0.32 2.95,-0.95 v 0.87 h 1.82 l 0.44,-18.95 H 101 Z m 0,12.48 c -0.63,0.6 -1.47,0.9 -2.53,0.9 -1.42,0 -2.13,-0.74 -2.13,-2.21 v -7.19 c 0,-1.51 0.83,-2.26 2.5,-2.26 h 2.16 z m -16.17,-8.64 c 0,-1.65 0.82,-2.47 2.45,-2.47 1.63,0 2.45,0.83 2.45,2.47 v 3.03 h -4.9 z m 3.11,11.27 c 1.21,0 2.25,-0.14 3.13,-0.42 v -1.74 c -1.11,0.32 -2.18,0.47 -3.21,0.47 -1.04,0 -1.8,-0.19 -2.29,-0.58 -0.49,-0.39 -0.74,-0.97 -0.74,-1.76 V 160 h 6.69 v -4.58 c 0,-1.25 -0.35,-2.24 -1.04,-2.99 -0.69,-0.75 -1.76,-1.12 -3.2,-1.12 -1.44,0 -2.51,0.37 -3.22,1.12 -0.71,0.75 -1.07,1.74 -1.07,2.99 v 7.32 c 0,2.64 1.65,3.95 4.95,3.95 m -10.19,0.11 c 0,0.72 -0.14,1.24 -0.42,1.55 -0.28,0.32 -0.73,0.47 -1.34,0.47 -0.19,0 -0.43,-0.02 -0.71,-0.05 v 1.68 c 0.26,0.05 0.52,0.08 0.76,0.08 1.18,0 2.07,-0.33 2.67,-0.99 0.61,-0.66 0.91,-1.58 0.91,-2.75 v -15.11 h -1.87 z m 2.08,-18.12 c 0,-0.81 -0.38,-1.21 -1.14,-1.21 -0.76,0 -1.15,0.4 -1.15,1.21 0,0.81 0.38,1.21 1.15,1.21 0.77,0 1.14,-0.4 1.14,-1.21 m -17.14,2.9 h -1.79 v 14.98 h 1.87 v -12.61 c 0.97,-0.46 1.86,-0.68 2.69,-0.68 1.3,0 1.95,0.64 1.95,1.92 v 11.37 h 1.87 V 155 c 0,-1.11 -0.32,-1.96 -0.95,-2.57 -0.63,-0.61 -1.43,-0.91 -2.41,-0.91 -0.98,0 -2.05,0.25 -3.22,0.74 v -0.68 z m -7.29,14.98 h 1.87 v -14.87 h -1.87 z m 2.08,-17.88 c 0,-0.81 -0.38,-1.21 -1.14,-1.21 -0.76,0 -1.15,0.4 -1.15,1.21 0,0.81 0.38,1.21 1.15,1.21 0.76,0.01 1.14,-0.4 1.14,-1.21"  class="st3"  style="fill:#647a84" />      </g>     </g>    </g>  <g  style="fill:#fff9d1"  id="g77"  clip-path="url(#SVGID_2_)"  class="st1"  transform="matrix(0.26458333,0,0,0.26458333,2.7061703,251.01424)">    <g  id="g75">     <defs  id="defs43" />      <clipPath  id="SVGID_8_">      <use  id="use45"  style="overflow:visible"  xlink:href="#SVGID_7_"  x="0"  y="0"  width="100%"  height="100%" />      </clipPath>      <g  id="g56"  clip-path="url(#SVGID_8_)"  class="st4">      <defs  id="defs49" />       <clipPath  id="SVGID_10_">       <use  id="use51"  style="overflow:visible"  xlink:href="#SVGID_9_"  x="0"  y="0"  width="100%"  height="100%" />       </clipPath>       <path  id="path54"  clip-path="url(#SVGID_10_)"  d="m 162.28,129.36 c 0,2.03 1.01,3.61 3.02,4.73 l 3.33,1.8 c 0.54,0.29 0.91,0.56 1.1,0.79 0.2,0.24 0.3,0.6 0.3,1.07 v 0.47 c 0,1.02 -0.89,1.52 -2.67,1.52 -1.78,0 -3.38,-0.3 -4.79,-0.9 v 4.51 c 1.14,0.48 2.83,0.72 5.08,0.72 2.25,0 4,-0.45 5.24,-1.35 1.24,-0.9 1.87,-2.19 1.87,-3.87 v -1.93 c 0,-1.87 -0.85,-3.26 -2.55,-4.2 l -3.55,-1.99 c -0.66,-0.35 -1.09,-0.67 -1.29,-0.95 -0.2,-0.28 -0.3,-0.71 -0.3,-1.29 v -0.47 c 0,-0.48 0.14,-0.85 0.44,-1.1 0.29,-0.26 0.85,-0.39 1.68,-0.39 1.62,0 3.06,0.27 4.32,0.81 v -4.48 c -1.04,-0.44 -2.61,-0.65 -4.71,-0.65 -2.1,0 -3.72,0.45 -4.84,1.35 -1.12,0.9 -1.68,2.18 -1.68,3.84 z m -9.34,-2.71 1.49,8.33 h -2.92 z m 7.52,17.26 -4.17,-21.55 h -6.5 l -4.23,21.55 h 4.45 l 0.84,-4.98 h 4.26 l 0.9,4.98 z m -26.27,0 h 10.48 v -3.92 h -5.75 v -17.63 h -4.73 z m -15.47,-5.07 c 0,1.66 0.58,2.94 1.73,3.86 1.15,0.91 2.84,1.37 5.05,1.37 2.22,0 4.14,-0.44 5.75,-1.31 v -10.42 h -4.54 v 7.28 c -0.33,0.17 -0.8,0.25 -1.41,0.25 -0.61,0 -1.07,-0.13 -1.38,-0.39 -0.31,-0.26 -0.47,-0.64 -0.47,-1.14 v -10.23 c 0,-0.5 0.22,-0.89 0.65,-1.18 0.43,-0.29 1.28,-0.43 2.52,-0.43 1.24,0 2.49,0.24 3.73,0.72 v -4.42 c -1.18,-0.39 -2.64,-0.59 -4.39,-0.59 -2.32,0 -4.11,0.48 -5.36,1.45 -1.25,0.96 -1.88,2.26 -1.88,3.9 z m -8.04,5.07 h 4.73 v -21.55 h -4.73 z m -9.18,-15.61 -2.15,-5.94 h -5.04 l 4.6,10.82 -4.6,10.73 h 5.07 l 2.11,-5.88 1.99,5.88 h 5.07 l -4.63,-10.73 4.63,-10.82 h -5.04 z m -20.13,15.61 h 10.92 v -4.04 h -6.25 v -4.85 h 5.41 v -4.04 h -5.41 v -4.57 h 6.25 v -4.04 H 81.37 Z m -11.96,0 h 10.48 v -3.92 h -5.75 v -17.63 h -4.73 z m -14.66,0 h 4.7 v -6.22 h 2.33 c 1.68,0 3,-0.4 3.96,-1.21 0.96,-0.81 1.45,-2 1.45,-3.58 v -5.75 c 0,-1.57 -0.48,-2.77 -1.45,-3.58 -0.96,-0.81 -2.29,-1.21 -3.96,-1.21 h -7.03 z m 7.78,-11.57 c 0,0.87 -0.45,1.31 -1.34,1.31 h -1.74 v -7.25 h 1.74 c 0.89,0 1.34,0.43 1.34,1.31 z"  class="st5"  style="fill:#afca0b" />      </g>      <g  id="g73"  clip-path="url(#SVGID_8_)"  class="st4">      <defs  id="defs59" />       <clipPath  id="SVGID_12_">       <use  id="use61"  style="overflow:visible"  xlink:href="#SVGID_11_"  x="0"  y="0"  width="100%"  height="100%" />       </clipPath>              <radialGradient  gradientUnits="userSpaceOnUse"  gradientTransform="matrix(32.166,0,0,-32.166,1223.5194,8516.6758)"  r="0.68699998"  cy="260.28519"  cx="-34.4804"  id="SVGID_13_">       <stop  id="stop64"  style="stop-color:#AFCA0B"  offset="0" />        <stop  id="stop66"  style="stop-color:#AFCA0B"  offset="9.340660e-04" />        <stop  id="stop68"  style="stop-color:#95C11F"  offset="1" />       </radialGradient>       <rect  id="rect71"  clip-path="url(#SVGID_12_)"  height="12.7"  width="120"  class="st6"  y="131.37"  x="54.75"  style="fill:url(#SVGID_13_)" />      </g>     </g>    </g>  <g  id="g112"  transform="matrix(0.26458333,0,0,0.26458333,2.7061703,251.01424)">   <g  id="g110">    <g  id="g108">     <defs  id="defs101" />      <clipPath  id="SVGID_18_">      <use  height="100%"  width="100%"  y="0"  x="0"  xlink:href="#SVGID_17_"  style="overflow:visible"  id="use103" />      </clipPath>      <path  style="fill:#afca11"  class="st9"  d="m 178.26,124.27 h 0.33 c 0.18,0 0.3,0.03 0.37,0.08 0.07,0.05 0.11,0.17 0.11,0.36 0,0.19 -0.04,0.32 -0.13,0.39 -0.08,0.07 -0.23,0.1 -0.43,0.1 h -0.26 v -0.93 z m -0.38,2.21 h 0.38 v -0.96 h 0.29 c 0.07,0 0.13,0 0.16,-0.01 l 0.39,0.97 h 0.42 l -0.47,-1.05 c 0.24,-0.12 0.35,-0.36 0.35,-0.73 0,-0.51 -0.29,-0.77 -0.86,-0.77 h -0.69 v 2.55 z m -0.51,-2.61 c 0.19,-0.24 0.6,-0.36 1.22,-0.36 0.62,0 1.03,0.12 1.23,0.36 0.2,0.24 0.3,0.69 0.3,1.35 0,0.66 -0.1,1.1 -0.29,1.34 -0.2,0.24 -0.61,0.35 -1.23,0.35 -0.63,0 -1.03,-0.12 -1.22,-0.35 -0.19,-0.24 -0.28,-0.68 -0.28,-1.34 -0.02,-0.66 0.07,-1.11 0.27,-1.35 m -0.28,2.91 c 0.28,0.32 0.78,0.47 1.51,0.47 0.73,0 1.23,-0.16 1.51,-0.48 0.28,-0.32 0.41,-0.84 0.41,-1.56 0,-0.72 -0.14,-1.24 -0.42,-1.57 -0.28,-0.32 -0.78,-0.49 -1.5,-0.49 -0.72,0 -1.22,0.16 -1.5,0.49 -0.28,0.33 -0.42,0.85 -0.42,1.57 0,0.72 0.13,1.26 0.41,1.57"  clip-path="url(#SVGID_18_)"  id="path106" />     </g>    </g>   </g>  <g  id="g306"  transform="matrix(0.20975229,0,0,0.20975229,-0.91464975,280.66829)">  <path  id="path302"  d="M 75.97,50.42 C 73.55,43.59 66.92,32.31 58.25,23.24 49.53,14.05 36.85,3.55 28,3.88 21.38,4.14 17.63,8.63 14.27,15.22 c -0.31,0.84 0.08,1.56 1.43,1.56 h 22.08 c 0,0 1.64,-0.03 2.52,0.83 3.21,3.17 5.31,6.22 6.91,9.82 0.71,1.58 -0.09,2.72 -2.26,2.72 -3.99,0 -7.88,0.01 -9.62,0 -1.07,0 -1.86,0.94 -1.86,1.99 0,0.01 0,0.01 0,0.02 l -0.03,26.78 c 0,0 0.04,1.21 -1.49,1.94 -3.01,1.44 -7.64,2.75 -11.97,3.21 0,0 -1.34,0.26 -1.34,-1.42 V 32.11 c 0,0 0,0 0,0 0,-1.08 -0.84,-1.96 -1.91,-1.96 H 9.7 c 0,0 0,0 0,0 -0.96,0 -1.49,0.52 -1.79,1.29 -2.42,8.8 -3.67,18.31 -3.54,24.21 0.19,8.06 1.14,13.52 4.77,18.08 3.44,4.31 14.16,4.85 24.53,3.43 C 50.33,74.96 59.35,71.1 67.58,67 79.29,61.34 78.39,57.25 75.97,50.42"  class="st0"  style="fill:#ffffff" />   <path  id="path304"  d="m 67.57,66.99 c 2.47,-1.19 4.35,-2.31 5.8,-3.4 C 65.82,48.49 51.13,37.35 33.48,34.27 l -0.03,24.66 c 0,0 0.04,1.21 -1.49,1.94 -3.01,1.44 -7.64,2.75 -11.97,3.21 0,0 -1.34,0.26 -1.34,-1.42 V 33.62 c -4.09,0.35 -8.05,1.11 -11.84,2.27 -1.69,7.43 -2.55,14.85 -2.44,19.76 0.19,8.06 1.14,13.52 4.77,18.08 3.44,4.31 14.16,4.85 24.53,3.43 16.64,-2.21 25.66,-6.06 33.9,-10.17"  class="st1"  style="fill:#fff9d1" />  </g>  </g>  </g>  <style  type="text/css"  id="style10">  .st0{fill:#FFFFFF;}  .st1{clip-path:url(#SVGID_2_);}  .st2{clip-path:url(#SVGID_4_);}  .st3{clip-path:url(#SVGID_6_);fill:#647A84;}  .st4{clip-path:url(#SVGID_8_);}  .st5{clip-path:url(#SVGID_10_);fill:#AFCA0B;}  .st6{clip-path:url(#SVGID_12_);fill:url(#SVGID_13_);}  .st7{clip-path:url(#SVGID_2_);fill:#FFDE14;}  .st8{clip-path:url(#SVGID_15_);fill:url(#SVGID_16_);}  .st9{clip-path:url(#SVGID_18_);fill:#AFCA11;} </style>  <style  type="text/css"  id="style300">  .st0{fill:#FFFFFF;}  .st1{fill:#FFF9D1;} </style> </svg> 
</div>

<div id="inleyPreviewDiv" name="inleyPreviewDiv"></div>

<br><br>
<div id="guiElements" style="width: fit-content;">
	<div id="settings"  style="">
		<div style="background-color: aliceblue; padding: 15px; width: 100%">
			<div style='font-weight: bold; margin-bottom: 8px;'>Vitrine LxBxH Außenmaße [mm]</div>
			<input type="number" id="cabinetLength" name="cabinetLength" onchange="cabinetLengthChanged()" style="width: 60px;"> x 
			<input type="number" id="cabinetWidth"  name="cabinetWidth"  onchange="cabinetWidthChanged()"  style="width: 60px;"> x 
			<input type="number" id="cabinetHeight" name="cabinetHeight" onchange="cabinetHeightChanged()" style="width: 60px;">
		</div>

		<div style="background-color: #C49976; padding: 15px; width: 100%;">
			<div style='font-weight: bold; margin-bottom: 8px;'>Karton Templates - (üblicherweise vorhandene Schachteln)</div>
			<input type="radio" id="box500x300x200"  name="boxTemplate" value="500x300x200"  onchange="boxTemplateChanged()" style="width: 15px; margin-left:20px; font-family: monospace" checked="checked" > 500 * 300 * 200 mm<br>
			<input type="radio" id="box630x430x400"  name="boxTemplate" value="630x430x400"  onchange="boxTemplateChanged()" style="width: 15px; margin-left:20px; font-family: monospace"> 630 * 430 * 400 mm<br>
			<input type="radio" id="box786x586x580"  name="boxTemplate" value="786x586x580"  onchange="boxTemplateChanged()" style="width: 15px; margin-left:20px; font-family: monospace"> 786 * 586 * 580 mm<br>
			<input type="radio" id="box1000x700x500" name="boxTemplate" value="1000x700x500" onchange="boxTemplateChanged()" style="width: 15px; margin-left:20px; font-family: monospace"> 1000 * 700 * 500 mm<br>
			<br>
			<div style='font-weight: bold; margin-bottom: 8px;'>Karton LxBxH Innenmaß [mm]</div>
			<input type="number" id="boxLength" name="boxLength" onchange="boxLengthChanged()" style="width: 60px;"> x 
			<input type="number" id="boxWidth"  name="boxWidth"  onchange="boxWidthChanged()"  style="width: 60px;"> x 
			<input type="number" id="boxHeight" name="boxHeight" onchange="boxHeightChanged()" style="width: 60px;">
		</div>
		<div style="background-color: blanchedalmond; padding: 15px; width: 100%;">
			<div style='font-weight: bold;'>Inlay ohne Karton Vitrine + 40mm Schutze</div>
			<button id="downloadInlayOhneKarton" onclick="defineInlayOhneKarton()" title="definiert die maße des Kartons in einer größe, die 40 mm größer ist als die Vitrine,\nfür nur Kantenschutz z.B.: für Botendienst"> Inlay ohne Karton</button>
		</div>
	</div>
	
	<div style="background-color: blanchedalmond; padding: 15px; width: 100%; margin-bottom: 8px;">
		<div style='font-weight: bold;'>Auftragsnummer</div>
		<input type="text" id="auftragsNummer" name="auftragsNummer" onchange="auftragsnummerChanged()" maxlength="16" value="?" style="width: 120px;">
	</div>

	<div id="exportButtons" style="background-color: cornsilk; padding: 15px; width: 100%; margin-top:10px">
		<button id="downloadDXF" onclick="downloadDXF()" title="Generiere und download eine DXF Datei"> DXF Download</button>
		<button id="downloadSVG" onclick="downloadSVG()" title="Generiere und download eine SVG Datei"> SVG Download</button>
	</div>
</div>
<script type="text/javascript">
var makerjs = require('makerjs');
var font;
var model;
var metadata = {
	// cabinet = Vitrine
	cabinetLength : 800, //359,
	cabinetWidth : 700, //159,
	cabinetHeight : 600, //124,

	// Box = Karton
	boxLength : 1000, //500,
	boxWidth : 780, //300,
	boxHeight : 680, //200,

	largeRadius : 5,
	smallRadius : 0.99,

	minDeltaBoxCabinet : 60,
};

function breiteMittlererLappenLinksRechts() {
	return (metadata.boxLength - metadata.cabinetLength - 16) / 2;
}

function kartonbreiteMinusLappenLinksRechts() {
	return metadata.cabinetWidth + 12;
}

function obenUntenFetteLasche() {
	return metadata.boxHeight * 0.18;
}

function innenLinksRechtsLaschenHoehe() {
	return metadata.boxHeight * 0.34;
}

function isCartonWidtherThanBox() {
	return metadata.boxWidth > (breiteMittlererLappenLinksRechts() * 2 + kartonbreiteMinusLappenLinksRechts());
}

function determineTotalWidth() {
	return Math.max(metadata.boxWidth, breiteMittlererLappenLinksRechts() * 2 + kartonbreiteMinusLappenLinksRechts());
}

function determineTotalHeight() {
	return metadata.boxHeight;
}

function determineEini() {
	return isCartonWidtherThanBox() ? ((metadata.boxWidth - kartonbreiteMinusLappenLinksRechts()) / 2) : breiteMittlererLappenLinksRechts();
}

function determineOba() {
	return ((metadata.boxHeight - (metadata.cabinetHeight + 8 )) / 2) + 30;
}

document.addEventListener("DOMContentLoaded", function(event) { 
	let thisYear = new Date();
	document.getElementById('auftragsNummer').value = "K" + (thisYear.getYear() % 100);
	opentype.load("https://fonts.cdnfonts.com/s/18519/Lovelo-Black.woff", function(err, fontParam) {
		if (err) {
			alert("Error: " + err);
		} else {
			font = fontParam;

			model = createModel();
			drawPreview();
			checkBoxTemplate();
			document.getElementById('cabinetLength').focus();
		}
	});
});

function createModel() {
	let obaLinkRechts = (metadata.boxHeight - innenLinksRechtsLaschenHoehe()) / 2;

	let perforationBorderLeftRight = (metadata.boxHeight - innenLinksRechtsLaschenHoehe() - obenUntenFetteLasche() - obenUntenFetteLasche() - 2 - 2 - 5 - 5) / 4;

	let lineLeftUpperX = (determineTotalWidth() - metadata.boxWidth ) / 2;

	let leftXOfFettenSeitlichenMittlerenLappen = isCartonWidtherThanBox() ? determineEini() - breiteMittlererLappenLinksRechts() : 0;

	var modelLocal = {
	  paths: {

		// Main Border
		lineBottom: new makerjs.paths.Line([lineLeftUpperX, 0], [determineTotalWidth() - lineLeftUpperX, 0]),
		lineTop: new makerjs.paths.Line([lineLeftUpperX, determineTotalHeight()], [determineTotalWidth() - lineLeftUpperX, determineTotalHeight()]),

		lineLeftUpper:  new makerjs.paths.Line([lineLeftUpperX, determineTotalHeight()], [lineLeftUpperX, determineTotalHeight() - obenUntenFetteLasche()]),
		lineRightUpper:  new makerjs.paths.Line([determineTotalWidth() - lineLeftUpperX, determineTotalHeight()], [determineTotalWidth() - lineLeftUpperX, determineTotalHeight() - obenUntenFetteLasche()]),
		lineLeftLower:  new makerjs.paths.Line([lineLeftUpperX, 0], [lineLeftUpperX, obenUntenFetteLasche()]),
		lineRightLower:  new makerjs.paths.Line([determineTotalWidth() - lineLeftUpperX, 0], [determineTotalWidth() - lineLeftUpperX, obenUntenFetteLasche()]),

		schnittEiniLinksOben : new makerjs.paths.Line([lineLeftUpperX, determineTotalHeight() - obenUntenFetteLasche()], [ determineEini() , determineTotalHeight() - obenUntenFetteLasche()]),
		schnittEiniLinksUnten : new makerjs.paths.Line([lineLeftUpperX, obenUntenFetteLasche()], [ determineEini() , obenUntenFetteLasche()]),
		schnittEiniRechtsOben : new makerjs.paths.Line([determineTotalWidth() - lineLeftUpperX, determineTotalHeight() - obenUntenFetteLasche()], [ determineTotalWidth() - determineEini(), determineTotalHeight() - obenUntenFetteLasche()]),
		schnittEiniRechtsUnten : new makerjs.paths.Line([determineTotalWidth() - lineLeftUpperX, obenUntenFetteLasche()], [ determineTotalWidth() - determineEini() , obenUntenFetteLasche()]),

		schnittEiniLinksObenToBack : new makerjs.paths.Line([determineEini(), determineTotalHeight() - obenUntenFetteLasche()], [ determineEini() , determineTotalHeight() - obenUntenFetteLasche() - 2]),
		schnittEiniLinksUntenToBack : new makerjs.paths.Line([determineEini(), obenUntenFetteLasche()], [ determineEini() , obenUntenFetteLasche() + 2]),
		schnittEiniRechtsObenToBack : new makerjs.paths.Line([determineTotalWidth() - determineEini(), determineTotalHeight() - obenUntenFetteLasche()], [ determineTotalWidth() - determineEini(), determineTotalHeight() - obenUntenFetteLasche() - 2]),
		schnittEiniRechtsUntenToBack : new makerjs.paths.Line([determineTotalWidth() - determineEini(), obenUntenFetteLasche()], [ determineTotalWidth() - determineEini() , obenUntenFetteLasche() + 2]),

		schnittEiniLinksObenBack : new makerjs.paths.Line([leftXOfFettenSeitlichenMittlerenLappen, determineTotalHeight() - obenUntenFetteLasche() - 2], [ determineEini() , determineTotalHeight() - obenUntenFetteLasche() - 2]),
		schnittEiniLinksUntenBack : new makerjs.paths.Line([leftXOfFettenSeitlichenMittlerenLappen, obenUntenFetteLasche() + 2], [ determineEini() , obenUntenFetteLasche() + 2]),
		schnittEiniRechtsObenBack : new makerjs.paths.Line([determineTotalWidth() - (leftXOfFettenSeitlichenMittlerenLappen), determineTotalHeight() - obenUntenFetteLasche() - 2], [ determineTotalWidth() - determineEini(), determineTotalHeight() - obenUntenFetteLasche() - 2]),
		schnittEiniRechtsUntenBack : new makerjs.paths.Line([determineTotalWidth() - (leftXOfFettenSeitlichenMittlerenLappen), obenUntenFetteLasche() + 2], [ determineTotalWidth() - determineEini() , obenUntenFetteLasche() + 2]),

		lineLeftMiddle : new makerjs.paths.Line([leftXOfFettenSeitlichenMittlerenLappen, determineTotalHeight() - obenUntenFetteLasche() - 2], [ leftXOfFettenSeitlichenMittlerenLappen , obenUntenFetteLasche() + 2]),
		lineRightMiddle : new makerjs.paths.Line([determineTotalWidth() - (leftXOfFettenSeitlichenMittlerenLappen), determineTotalHeight() - obenUntenFetteLasche() - 2], [ determineTotalWidth() - (leftXOfFettenSeitlichenMittlerenLappen) , obenUntenFetteLasche() + 2]),


		// Other Parts
		leftMiddlePartUpper : new makerjs.paths.Line([determineEini(), determineTotalHeight() - obaLinkRechts], [ determineEini() + 40 , determineTotalHeight() - obaLinkRechts]),
		leftMiddlePartLower : new makerjs.paths.Line([determineEini(), obaLinkRechts], [ determineEini() + 40 , obaLinkRechts]),
		leftMiddlePartMiddle : new makerjs.paths.Line([determineEini() + 40, determineTotalHeight() - obaLinkRechts], [ determineEini() + 40 , obaLinkRechts]),

		rightMiddlePartUpper : new makerjs.paths.Line([determineTotalWidth() - determineEini(), determineTotalHeight() - obaLinkRechts], [ determineTotalWidth() - determineEini() - 40 , determineTotalHeight() - obaLinkRechts]),
		rightMiddlePartLower : new makerjs.paths.Line([determineTotalWidth() - determineEini(), obaLinkRechts], [ determineTotalWidth() - determineEini() - 40 , obaLinkRechts]),
		rightMiddlePartMiddle : new makerjs.paths.Line([determineTotalWidth() - determineEini() - 40, determineTotalHeight() - obaLinkRechts], [ determineTotalWidth() - determineEini() - 40 , obaLinkRechts]),

		upperMiddlePartLower : new makerjs.paths.Line([determineEini() + 55, determineTotalHeight() - determineOba()], [ determineTotalWidth() - determineEini() - 55 , determineTotalHeight() - determineOba()]),
		upperMiddlePartLeft : new makerjs.paths.Line([determineEini() + 55, determineTotalHeight() - determineOba()], [ determineEini() + 55 , determineTotalHeight() - determineOba() + 30]),
		upperMiddlePartRight : new makerjs.paths.Line([determineTotalWidth() - determineEini() - 55, determineTotalHeight() - determineOba()], [ determineTotalWidth() - determineEini() - 55 , determineTotalHeight() - determineOba() + 30]),
		upperMiddlePartUpperLeft : new makerjs.paths.Line([determineEini() + 55, determineTotalHeight() - determineOba() + 30], [ determineEini() + 55 + metadata.largeRadius + 0.01, determineTotalHeight() - determineOba() + 30]),
		upperMiddlePartUpperRight : new makerjs.paths.Line([determineTotalWidth() - determineEini() - 55, determineTotalHeight() - determineOba() + 30], [ determineTotalWidth() - determineEini() - 55 - metadata.largeRadius - 0.01, determineTotalHeight() - determineOba() + 30]),


		lowerMiddlePartLower : new makerjs.paths.Line([determineEini() + 55, determineOba()], [ determineTotalWidth() - determineEini() - 55 , determineOba()]),
		lowerMiddlePartLeft : new makerjs.paths.Line([determineEini() + 55, determineOba() - 30], [ determineEini() + 55 , determineOba()]),
		lowerMiddlePartRight : new makerjs.paths.Line([determineTotalWidth() - determineEini() - 55, determineOba() - 30], [ determineTotalWidth() - determineEini() - 55 , determineOba()]),
		lowerMiddlePartUpperLeft : new makerjs.paths.Line([determineEini() + 55, determineOba() - 30], [ determineEini() + 55 + metadata.largeRadius + 0.01, determineOba() - 30]),
		lowerMiddlePartUpperRight : new makerjs.paths.Line([determineTotalWidth() - determineEini() - 55, determineOba() - 30], [ determineTotalWidth() - determineEini() - 55 - metadata.largeRadius - 0.01, determineOba() - 30]),

		
		perforationLeftUpper : new makerjs.paths.Line([determineEini(), determineTotalHeight() - (obenUntenFetteLasche() + 2 + perforationBorderLeftRight)], [ determineEini(), determineTotalHeight() - (obenUntenFetteLasche() + 2 + perforationBorderLeftRight + 5)]),
		perforationLeftLower : new makerjs.paths.Line([determineEini(), obenUntenFetteLasche() + 2 + perforationBorderLeftRight], [ determineEini(), obenUntenFetteLasche() + 2 + perforationBorderLeftRight + 5]),

		perforationRightUpper : new makerjs.paths.Line([determineTotalWidth() - determineEini(), determineTotalHeight() - (obenUntenFetteLasche() + 2 + perforationBorderLeftRight)], [ determineTotalWidth() - determineEini(), determineTotalHeight() - (obenUntenFetteLasche() + 2 + perforationBorderLeftRight + 5)]),
		perforationRightLower : new makerjs.paths.Line([determineTotalWidth() - determineEini(), obenUntenFetteLasche() + 2 + perforationBorderLeftRight], [ determineTotalWidth() - determineEini(), obenUntenFetteLasche() + 2 + perforationBorderLeftRight + 5]),
	  },
	  models: {
	  	auftragsnummer : new makerjs.models.Text(font, document.getElementById('auftragsNummer').value, 6),
	  }
	};
	makerjs.model.center(modelLocal.models.auftragsnummer);

	makerjs.model.moveRelative(modelLocal.models.auftragsnummer, [determineTotalWidth() / 2, determineTotalHeight() / 2]);

	modelLocal.units = makerjs.unitType.Millimeter;

	

	if (((metadata.boxWidth - determineEini() - 55) - (determineEini() + 55)) >= 260) {
		//if (((metadata.boxWidth - determineEini() - 55) - (determineEini() + 55)) >= 560) {
			// 3 Spalten
			// TODO
		//} else {
			// 2 Spalten
			createColumnSpitAndPerforation2Columns(modelLocal);
		//}
	} else {
		// 1 Spalte
		createPerforation1Column(modelLocal);
	}

	createRadius(modelLocal);

	return modelLocal;
}

function createColumnSpitAndPerforation2Columns(modelLocal) {
	modelLocal.paths["splitterUpper1"] = new makerjs.paths.Line([(determineTotalWidth() / 2) - 30, determineTotalHeight() - determineOba()], [(determineTotalWidth() / 2) - 30, determineTotalHeight() - determineOba() + 30]);
	modelLocal.paths["splitterUpper2"] = new makerjs.paths.Line([(determineTotalWidth() / 2) + 30, determineTotalHeight() - determineOba()], [(determineTotalWidth() / 2) + 30, determineTotalHeight() - determineOba() + 30]);

	modelLocal.paths["splitterLower1"] = new makerjs.paths.Line([(determineTotalWidth() / 2) - 30, determineOba()], [(determineTotalWidth() / 2) - 30, determineOba() - 30]);
	modelLocal.paths["splitterLower2"] = new makerjs.paths.Line([(determineTotalWidth() / 2) + 30, determineOba()], [(determineTotalWidth() / 2) + 30, determineOba() - 30]);

	makerjs.path.converge(modelLocal.paths.upperMiddlePartLower, modelLocal.paths.splitterUpper2, true, true);
	makerjs.path.converge(modelLocal.paths.lowerMiddlePartLower, modelLocal.paths.splitterLower2, true, true);
	
	modelLocal.paths["upperMiddlePartLower2"] = new makerjs.paths.Line(
		[determineEini() + 55, determineTotalHeight() - determineOba()], 
		[(determineTotalWidth() / 2) - 30, determineTotalHeight() - determineOba()]);

	modelLocal.paths["lowerMiddlePartLower2"] = new makerjs.paths.Line(
		[determineEini() + 55, determineOba()], 
		[(determineTotalWidth() / 2) - 30, determineOba()]);

	modelLocal.paths["upperMiddlePartUpperLeft2"] = new makerjs.paths.Line([(determineTotalWidth() / 2) - 30, determineTotalHeight() - determineOba() + 30], [ (determineTotalWidth() / 2) - 30 - metadata.largeRadius - 0.01, determineTotalHeight() - determineOba() + 30]),
	modelLocal.paths["upperMiddlePartUpperRight2"] = new makerjs.paths.Line([(determineTotalWidth() / 2) + 30, determineTotalHeight() - determineOba() + 30], [ (determineTotalWidth() / 2) + 30 + metadata.largeRadius + 0.01, determineTotalHeight() - determineOba() + 30]),

	modelLocal.paths["lowerMiddlePartUpperLeft2"] = new makerjs.paths.Line([(determineTotalWidth() / 2) - 30, determineOba() - 30], [ (determineTotalWidth() / 2) - 30 - metadata.largeRadius - 0.01, determineOba() - 30]),
	modelLocal.paths["lowerMiddlePartUpperRight2"] = new makerjs.paths.Line([(determineTotalWidth() / 2) + 30, determineOba() - 30], [ (determineTotalWidth() / 2) + 30 + metadata.largeRadius + 0.01, determineOba() - 30]),

	modelLocal.paths.radiusLeftUpperxxx = makerjs.path.fillet(modelLocal.paths.splitterUpper2, modelLocal.paths.upperMiddlePartLower, metadata.largeRadius);
	modelLocal.paths.radiusLeftUppervvv = makerjs.path.fillet(modelLocal.paths.splitterUpper1, modelLocal.paths.upperMiddlePartLower2, metadata.largeRadius);
	modelLocal.paths.radiusLeftUpperwww = makerjs.path.fillet(modelLocal.paths.upperMiddlePartLeft, modelLocal.paths.upperMiddlePartLower2, metadata.largeRadius);

	modelLocal.paths.radiusLeftUpperyyy = makerjs.path.fillet(modelLocal.paths.splitterUpper1, modelLocal.paths.upperMiddlePartUpperLeft2, metadata.largeRadius);
	modelLocal.paths.radiusLeftUpperzzz = makerjs.path.fillet(modelLocal.paths.splitterUpper2, modelLocal.paths.upperMiddlePartUpperRight2, metadata.largeRadius);

	modelLocal.paths.radiusLeftLowerxxx = makerjs.path.fillet(modelLocal.paths.splitterLower2, modelLocal.paths.lowerMiddlePartLower, metadata.largeRadius);
	modelLocal.paths.radiusLeftLowervvv = makerjs.path.fillet(modelLocal.paths.splitterLower1, modelLocal.paths.lowerMiddlePartLower2, metadata.largeRadius);
	modelLocal.paths.radiusLeftLowerwww = makerjs.path.fillet(modelLocal.paths.lowerMiddlePartLeft, modelLocal.paths.lowerMiddlePartLower2, metadata.largeRadius);

	modelLocal.paths.radiusLeftLoweryyy = makerjs.path.fillet(modelLocal.paths.splitterLower1, modelLocal.paths.lowerMiddlePartUpperLeft2, metadata.largeRadius);
	modelLocal.paths.radiusLeftLowerzzz = makerjs.path.fillet(modelLocal.paths.splitterLower2, modelLocal.paths.lowerMiddlePartUpperRight2, metadata.largeRadius);



	let perforatorUpperX1 = determineEini() + 55 + metadata.largeRadius + 0.01;
	let perforatorUpperX2 = (determineTotalWidth() / 2) - 30 - metadata.largeRadius - 0.01;

	let delta = perforatorUpperX2 - perforatorUpperX1;
	let numberOfBzzzz = Math.floor((((delta) / 10 /* to cm */) - 1 /* min 1 cm Rand auf der 2. Seite */ ) / 2 /* Teile in perforiert und nicht perforiert */ );
	let notPerforierterGapWidth = (delta - (numberOfBzzzz * 10)) / (numberOfBzzzz + 1);

	for (let i = 0; i < numberOfBzzzz; i++) {
		let xLoop = perforatorUpperX1 + (i * (notPerforierterGapWidth + 10)) + notPerforierterGapWidth;
		modelLocal.paths["perforationCenterUpperLeft" + i] = new makerjs.paths.Line([xLoop, determineTotalHeight() - determineOba() + 30], [xLoop + 10, determineTotalHeight() - determineOba() + 30]);	
		modelLocal.paths["perforationCenterLowerLeft" + i] = new makerjs.paths.Line([xLoop, determineOba() - 30], [xLoop + 10, determineOba() - 30]);
		let delta = ((determineTotalWidth() / 2) + 30) - (determineEini() + 55);
		modelLocal.paths["perforationCenterUpperRight" + i] = new makerjs.paths.Line([xLoop + delta, determineTotalHeight() - determineOba() + 30], [xLoop + delta + 10, determineTotalHeight() - determineOba() + 30]);	
		modelLocal.paths["perforationCenterLowerRight" + i] = new makerjs.paths.Line([xLoop + delta, determineOba() - 30], [xLoop + delta + 10, determineOba() - 30]);
	}
}

function createPerforation1Column(modelLocal) {
	let perforatorUpperX1 = determineEini() + 55 + metadata.largeRadius + 0.01;
	let perforatorUpperX2 = metadata.boxWidth - determineEini() - 55 - metadata.largeRadius - 0.01;

	let delta = perforatorUpperX2 - perforatorUpperX1;
	let numberOfBzzzz = Math.floor((((delta) / 10 /* to cm */) - 1 /* min 1 cm Rand auf der 2. Seite */ ) / 2 /* Teile in perforiert und nicht perforiert */ );
	let notPerforierterGapWidth = (delta - (numberOfBzzzz * 10)) / (numberOfBzzzz + 1);

	for (let i = 0; i < numberOfBzzzz; i++) {
		let xLoop = perforatorUpperX1 + (i * (notPerforierterGapWidth + 10)) + notPerforierterGapWidth;
		modelLocal.paths["perforationCenterUpper" + i] = new makerjs.paths.Line([xLoop, determineTotalHeight() - determineOba() + 30], [xLoop + 10, determineTotalHeight() - determineOba() + 30]);	
		modelLocal.paths["perforationCenterLower" + i] = new makerjs.paths.Line([xLoop, determineOba() - 30], [xLoop + 10, determineOba() - 30]);
	}
}

function createRadius(modelLocal) {

	// Main Border
	modelLocal.paths.radiusLeftUpper = makerjs.path.fillet(modelLocal.paths.lineLeftUpper, modelLocal.paths.lineTop, metadata.largeRadius);
	modelLocal.paths.radiusRightUpper = makerjs.path.fillet(modelLocal.paths.lineTop, modelLocal.paths.lineRightUpper, metadata.largeRadius);
	modelLocal.paths.radiusRightLower = makerjs.path.fillet(modelLocal.paths.lineRightLower, modelLocal.paths.lineBottom, metadata.largeRadius);
	modelLocal.paths.radiusLeftLower = makerjs.path.fillet(modelLocal.paths.lineBottom, modelLocal.paths.lineLeftLower, metadata.largeRadius);

	modelLocal.paths.radiusLeftUpperEinschnitt = makerjs.path.fillet(modelLocal.paths.lineLeftUpper, modelLocal.paths.schnittEiniLinksOben, metadata.largeRadius);
	modelLocal.paths.radiusLeftLowerEinschnitt = makerjs.path.fillet(modelLocal.paths.lineLeftLower, modelLocal.paths.schnittEiniLinksUnten, metadata.largeRadius);
	modelLocal.paths.radiusRightUpperEinschnitt = makerjs.path.fillet(modelLocal.paths.lineRightUpper, modelLocal.paths.schnittEiniRechtsOben, metadata.largeRadius);
	modelLocal.paths.radiusRightLowerEinschnitt = makerjs.path.fillet(modelLocal.paths.lineRightLower, modelLocal.paths.schnittEiniRechtsUnten, metadata.largeRadius);

	modelLocal.paths.radiusLeftUpperEinschnittBackOben = makerjs.path.fillet(modelLocal.paths.schnittEiniLinksOben, modelLocal.paths.schnittEiniLinksObenToBack, metadata.smallRadius);
	modelLocal.paths.radiusLeftUpperEinschnittBackUnten = makerjs.path.fillet(modelLocal.paths.schnittEiniLinksObenToBack, modelLocal.paths.schnittEiniLinksObenBack, metadata.smallRadius);
	modelLocal.paths.radiusLeftLowerEinschnittBackOben = makerjs.path.fillet(modelLocal.paths.schnittEiniLinksUnten, modelLocal.paths.schnittEiniLinksUntenToBack, metadata.smallRadius);
	modelLocal.paths.radiusLeftLowerEinschnittBackUnten = makerjs.path.fillet(modelLocal.paths.schnittEiniLinksUntenToBack, modelLocal.paths.schnittEiniLinksUntenBack, metadata.smallRadius);
	modelLocal.paths.radiusRightUpperEinschnittBackOben = makerjs.path.fillet(modelLocal.paths.schnittEiniRechtsOben, modelLocal.paths.schnittEiniRechtsObenToBack, metadata.smallRadius);
	modelLocal.paths.radiusRightUpperEinschnittBackUnten = makerjs.path.fillet(modelLocal.paths.schnittEiniRechtsObenToBack, modelLocal.paths.schnittEiniRechtsObenBack, metadata.smallRadius);
	modelLocal.paths.radiusRightLowerEinschnittBackOben = makerjs.path.fillet(modelLocal.paths.schnittEiniRechtsUnten, modelLocal.paths.schnittEiniRechtsUntenToBack, metadata.smallRadius);
	modelLocal.paths.radiusRightLowerEinschnittBackUnten = makerjs.path.fillet(modelLocal.paths.schnittEiniRechtsUntenToBack, modelLocal.paths.schnittEiniRechtsUntenBack, metadata.smallRadius);

	modelLocal.paths.radiusRightMiddleEinschnittLeftOben = makerjs.path.fillet(modelLocal.paths.schnittEiniLinksObenBack, modelLocal.paths.lineLeftMiddle, metadata.largeRadius);
	modelLocal.paths.radiusRightMiddleEinschnittLeftUnten = makerjs.path.fillet(modelLocal.paths.schnittEiniLinksUntenBack, modelLocal.paths.lineLeftMiddle, metadata.largeRadius);
	modelLocal.paths.radiusLeftMiddleEinschnittRightOben = makerjs.path.fillet(modelLocal.paths.schnittEiniRechtsObenBack, modelLocal.paths.lineRightMiddle, metadata.largeRadius);
	modelLocal.paths.radiusLeftMiddleEinschnittRightUnten = makerjs.path.fillet(modelLocal.paths.schnittEiniRechtsUntenBack, modelLocal.paths.lineRightMiddle, metadata.largeRadius);

	// Other Parts

	modelLocal.paths.radiusLeftMiddlePartUpper = makerjs.path.fillet(modelLocal.paths.leftMiddlePartMiddle, modelLocal.paths.leftMiddlePartUpper, metadata.largeRadius);
	modelLocal.paths.radiusLeftMiddlePartLower = makerjs.path.fillet(modelLocal.paths.leftMiddlePartMiddle, modelLocal.paths.leftMiddlePartLower, metadata.largeRadius);

	modelLocal.paths.radiusRightMiddlePartUpper = makerjs.path.fillet(modelLocal.paths.rightMiddlePartMiddle, modelLocal.paths.rightMiddlePartUpper, metadata.largeRadius);
	modelLocal.paths.radiusRightMiddlePartLower = makerjs.path.fillet(modelLocal.paths.rightMiddlePartMiddle, modelLocal.paths.rightMiddlePartLower, metadata.largeRadius);


	modelLocal.paths.radiusUpperPartLowerLeft = makerjs.path.fillet(modelLocal.paths.upperMiddlePartLower, modelLocal.paths.upperMiddlePartLeft, metadata.largeRadius);
	modelLocal.paths.radiusUpperPartLowerRight = makerjs.path.fillet(modelLocal.paths.upperMiddlePartLower, modelLocal.paths.upperMiddlePartRight, metadata.largeRadius);
	modelLocal.paths.radiusUpperPartUpperLeft = makerjs.path.fillet(modelLocal.paths.upperMiddlePartUpperLeft, modelLocal.paths.upperMiddlePartLeft, metadata.largeRadius);
	modelLocal.paths.radiusUpperPartUpperRight = makerjs.path.fillet(modelLocal.paths.upperMiddlePartUpperRight, modelLocal.paths.upperMiddlePartRight, metadata.largeRadius);


	modelLocal.paths.radiusLowerPartLowerLeft = makerjs.path.fillet(modelLocal.paths.lowerMiddlePartLower, modelLocal.paths.lowerMiddlePartLeft, metadata.largeRadius);
	modelLocal.paths.radiusLowerPartLowerRight = makerjs.path.fillet(modelLocal.paths.lowerMiddlePartLower, modelLocal.paths.lowerMiddlePartRight, metadata.largeRadius);
	modelLocal.paths.radiusLowerPartUpperLeft = makerjs.path.fillet(modelLocal.paths.lowerMiddlePartUpperLeft, modelLocal.paths.lowerMiddlePartLeft, metadata.largeRadius);
	modelLocal.paths.radiusLowerPartUpperRight = makerjs.path.fillet(modelLocal.paths.lowerMiddlePartUpperRight, modelLocal.paths.lowerMiddlePartRight, metadata.largeRadius);
}

function boxSizeCheck() {
	return metadata.cabinetLength + metadata.minDeltaBoxCabinet > metadata.boxLength ||
		metadata.cabinetWidth + metadata.minDeltaBoxCabinet > metadata.boxWidth ||
		metadata.cabinetHeight + metadata.minDeltaBoxCabinet > metadata.boxHeight
}

function drawPreview() {
	if (boxSizeCheck()) {
			document.getElementById('inleyPreviewDiv').innerHTML = "<div style='width:250px;'><div style='justify-content: center; display:flex'><?xml version='1.0' encoding='iso-8859-1'?> <svg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='200px'  viewBox='0 0 295.996 295.996' style='enable-background:new 0 0 295.996 295.996;' xml:space='preserve'> <g>  <path style='fill:#FFCE00;' d='M270.996,123.998c0-11.334-1.363-22.348-3.907-32.9c-7.269-15.152-17.35-28.708-29.558-39.996   c-22.391-13.376-48.766-20.666-76.771-19.644C83.492,34.274,23.139,99.196,25.955,176.463c0.413,11.304,2.17,22.239,5.087,32.673   c6.303,12.01,14.397,22.938,23.934,32.42c21.892,14.189,47.99,22.44,76.023,22.44C208.316,263.996,270.996,201.316,270.996,123.998   z M197.666,98.998c8.836,0,16,7.164,16,16s-7.164,16-16,16s-16-7.164-16-16S188.83,98.998,197.666,98.998z M98.666,98.998   c8.836,0,16,7.164,16,16s-7.164,16-16,16s-16-7.164-16-16S89.83,98.998,98.666,98.998z M87.959,215.396l-12.633-9.82   c21.441-27.579,57.392-40.777,91.587-33.631c21.262,4.447,40.353,16.391,53.756,33.631l-12.631,9.82   c-11.078-14.249-26.847-24.118-44.4-27.789C135.382,181.697,105.675,192.607,87.959,215.396z'/>  <path style='fill:#FFB100;' d='M267.089,91.098c2.544,10.553,3.907,21.566,3.907,32.9c0,77.318-62.68,139.998-139.998,139.998   c-28.032,0-54.131-8.251-76.023-22.44c23.88,23.744,56.766,38.44,93.023,38.44c72.784,0,131.998-59.214,131.998-131.998   C279.996,127.636,275.358,108.337,267.089,91.098z'/>  <path style='fill:#FFE454;' d='M160.76,31.457c28.006-1.021,54.381,6.268,76.771,19.644C213.985,29.328,182.521,16,147.998,16   C75.214,16,16,75.214,16,147.998c0,22.049,5.442,42.849,15.042,61.138c-2.917-10.434-4.674-21.369-5.087-32.673   C23.139,99.196,83.492,34.274,160.76,31.457z'/>  <path d='M147.998,0C66.392,0,0,66.392,0,147.998s66.392,147.998,147.998,147.998s147.998-66.392,147.998-147.998   S229.604,0,147.998,0z M147.998,279.996c-36.257,0-69.143-14.696-93.023-38.44c-9.536-9.482-17.631-20.41-23.934-32.42   C21.442,190.847,16,170.047,16,147.998C16,75.214,75.214,16,147.998,16c34.523,0,65.987,13.328,89.533,35.102   c12.208,11.288,22.289,24.844,29.558,39.996c8.27,17.239,12.907,36.538,12.907,56.9   C279.996,220.782,220.782,279.996,147.998,279.996z'/>  <path d='M163.638,187.607c17.554,3.671,33.322,13.54,44.4,27.789l12.631-9.82c-13.402-17.24-32.494-29.184-53.756-33.631   c-34.195-7.146-70.146,6.052-91.587,33.631l12.633,9.82C105.675,192.607,135.382,181.697,163.638,187.607z'/>  <circle cx='98.666' cy='114.998' r='16'/>  <circle cx='197.666' cy='114.998' r='16'/> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </svg></div> "
				+ " <div style='color:#aa2222;text-align:center'> Der Karton ist zu klein :-( </div></div> ";
			document.getElementById('downloadDXF').style.visibility = "hidden";
			document.getElementById('downloadSVG').style.visibility = "hidden";
			return;
	}

	let previewWidth = determineTotalWidth();
	let previewHeight = determineTotalHeight();

	var svg = makerjs.exporter.toSVG(model, {svgAttrs : {"width" : previewWidth + "px", "height" : previewHeight + "px", "id" : "preViewSvg" } });
		
	document.getElementById('inleyPreviewDiv').innerHTML = "<div id='backgroundDiv'></div>"
	
	document.getElementById('backgroundDiv').innerHTML = "<div id='contentDiv'></div>"
	
	document.getElementById('contentDiv').innerHTML = svg;
	document.getElementById('contentDiv').style.position = "relative";

	let viewBoxAttrib = "-1 -1 " + (previewWidth + 2) + " " + (previewHeight + 2) ;
	document.getElementById('preViewSvg').setAttribute("viewBox", viewBoxAttrib);

	let g = document.querySelector('#preViewSvg>g');
	g.style="stroke-width:0.35mm";

	document.getElementById('downloadDXF').style.visibility = "";
	document.getElementById('downloadSVG').style.visibility = "";
	
	document.getElementById("cabinetWidth").value = metadata.cabinetWidth;
	document.getElementById("cabinetHeight").value = metadata.cabinetHeight;
	document.getElementById("cabinetLength").value = metadata.cabinetLength;
	document.getElementById("boxWidth").value = metadata.boxWidth;
    document.getElementById("boxHeight").value = metadata.boxHeight;
    document.getElementById("boxLength").value = metadata.boxLength;
}
	
function download(data, filename, type) {
        var file = new Blob([data], {type: type});
        if (window.navigator.msSaveOrOpenBlob) // IE10+
            window.navigator.msSaveOrOpenBlob(file, filename);
        else { // Others
            var a = document.createElement("a"),
                    url = URL.createObjectURL(file);
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            setTimeout(function() {
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);  
            }, 0); 
        }
    }

function downloadDXF() {
	var dxfExp = makerjs.exporter.toDXF(model, { fontSize: 4 })
	download(dxfExp, "Karton Inlay " + document.getElementById('auftragsNummer').value + ".dxf", "dxf")
}

function downloadSVG() {
   var svgExp = '<?xml version="1.0" encoding="UTF-8"?>\n' + 
		makerjs.exporter.toSVG(model, { 
			units: makerjs.unitType.Millimeter, 
			svgAttrs : {
				"width" : (metadata.coughWidth + "mm"), 
				"height" : (metadata.cougHeight + "mm"), 
				"xmlns" : "http://www.w3.org/2000/svg",
				"xmlns:xlink" : "http://www.w3.org/1999/xlink",
				"version" : "1.1",
				"baseProfile" : "full"
						}
		});
	download(svgExp, "Karton Inlay " + document.getElementById('auftragsNummer').value + ".svg", "svg")
}

function genericChanged(elementId, metaDataFieldName1, metaDataFieldName2, metaDataFieldName3) {
	var widthInt = parseInt(document.getElementById(elementId).value);
	if (!isNaN(widthInt)) {
		document.getElementById(elementId).style.backgroundColor = "";
		if (metaDataFieldName3) {
		    metadata[metaDataFieldName1][metaDataFieldName2][metaDataFieldName3] = parseInt(widthInt);
		} else if (metaDataFieldName2) {
			metadata[metaDataFieldName1][metaDataFieldName2] = parseInt(widthInt);
		} else {
			metadata[metaDataFieldName1] = parseInt(widthInt);
		}
		model = createModel();
		drawPreview();
	} else {
	    document.getElementById(elementId).style.backgroundColor = "#d87979";
	}
}

function boxLengthChanged() {
    genericChanged("boxLength", "boxLength");
	unCheckTemplate();
}

function boxWidthChanged() {
	genericChanged("boxWidth", "boxWidth");
	unCheckTemplate()
}

function boxHeightChanged() {
	genericChanged("boxHeight", "boxHeight");
	unCheckTemplate()
}

function cabinetLengthChanged() {
	genericChanged("cabinetLength", "cabinetLength");
	checkBoxTemplate();
}

function cabinetWidthChanged() {
	genericChanged("cabinetWidth", "cabinetWidth");
	checkBoxTemplate();
}

function cabinetHeightChanged() {
	genericChanged("cabinetHeight", "cabinetHeight");
	checkBoxTemplate();
}

function boxTemplateChanged() {
	var selected = document.querySelector('input[name="boxTemplate"]:checked'); 
	if (selected != null) {
		values = selected.value.split("x");
		metadata.boxLength = parseInt(values[0]);
		metadata.boxWidth = parseInt(values[1]);
		metadata.boxHeight = parseInt(values[2]);
		document.getElementById("boxLength").value = values[0];
		document.getElementById("boxWidth").value = values[1];
		document.getElementById("boxHeight").value = values[2];
		model = createModel();
		drawPreview();
	}
}

function checkBoxTemplate() {
	var radios = document.getElementsByName("boxTemplate");
    for( i = 0; i < radios.length; i++ ) {
		values = radios[i].value.split("x");
        let boxLength = parseInt(values[0]);
		let boxWidth = parseInt(values[1]);
		let boxHeight = parseInt(values[2]);


		if (metadata.cabinetLength + metadata.minDeltaBoxCabinet <= boxLength &&
			metadata.cabinetWidth + metadata.minDeltaBoxCabinet <= boxWidth &&
			metadata.cabinetHeight + metadata.minDeltaBoxCabinet <= boxHeight) {
				radios[i].checked = true;
				metadata.boxLength = parseInt(values[0]);
				metadata.boxWidth = parseInt(values[1]);
				metadata.boxHeight = parseInt(values[2]);
				document.getElementById("boxLength").value = values[0];
				document.getElementById("boxWidth").value = values[1];
				document.getElementById("boxHeight").value = values[2];
				model = createModel();
				drawPreview();
				return;
		}
    }
	var selected = document.querySelector('input[name="boxTemplate"]:checked'); 
	if (selected != null) {
		selected.checked = false;
	}
	model = createModel();
	drawPreview();
}

function auftragsnummerChanged() {
	model = createModel();
	drawPreview();
}

function defineInlayOhneKarton() {
	unCheckTemplate();
	metadata.boxLength = metadata.cabinetLength + 80;
	metadata.boxWidth =  metadata.cabinetWidth + 80;
	metadata.boxHeight = metadata.cabinetHeight + 80;
	model = createModel();
	drawPreview();
}

function unCheckTemplate() {
	Array.from(document.getElementsByName('boxTemplate')).forEach(function(option_element) {
		option_element.checked = false;
	});
}

</script>
</body>
</html>
